(function(k,l,h,i){k.CSFRAMEWORK=k.CSFRAMEWORK||{};var j=k("body");var g=j.hasClass("rtl");k.fn.CSFRAMEWORK_TAB_NAVIGATION=function(){return this.each(function(){var a=k(this),d=a.find(".cs-nav"),c=a.find(".cs-reset"),b=a.find(".cs-expand-all");d.find("ul:first a").on("click",function(p){p.preventDefault();var e=k(this),f=e.next(),o=e.data("section");if(f.is("ul")){f.slideToggle("fast");e.closest("li").toggleClass("cs-tab-active")}else{k("#cs-tab-"+o).show().siblings().hide();d.find("a").removeClass("cs-section-active");e.addClass("cs-section-active");c.val(o)}});b.on("click",function(e){e.preventDefault();a.find(".cs-body").toggleClass("cs-show-all");k(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})})};k.CSFRAMEWORK.DEPENDENCY=function(c,a){var b=this;b.$el=k(c);b.el=c;b.init=function(){b.ruleset=k.deps.createRuleset();var d={show:function(e){e.removeClass("hidden")},hide:function(e){e.addClass("hidden")},log:false,checkTargets:false};if(a!==i){b.depSub()}else{b.depRoot()}k.deps.enable(b.$el,b.ruleset,d)};b.depRoot=function(){b.$el.each(function(){k(this).find("[data-controller]").each(function(){var d=k(this),e=d.data("controller").split("|"),p=d.data("condition").split("|"),o=d.data("value").toString().split("|"),f=b.ruleset;k.each(e,function(t,s){var n=o[t]||"",m=p[t]||p[0];f=f.createRule('[data-depend-id="'+s+'"]',m,n);f.include(d)})})})};b.depSub=function(){b.$el.each(function(){k(this).find("[data-sub-controller]").each(function(){var d=k(this),e=d.data("sub-controller").split("|"),p=d.data("sub-condition").split("|"),o=d.data("sub-value").toString().split("|"),f=b.ruleset;k.each(e,function(t,s){var n=o[t]||"",m=p[t]||p[0];f=f.createRule('[data-sub-depend-id="'+s+'"]',m,n);f.include(d)})})})};b.init()};k.fn.CSFRAMEWORK_DEPENDENCY=function(a){return this.each(function(){new k.CSFRAMEWORK.DEPENDENCY(this,a)})};k.fn.CSFRAMEWORK_CHOSEN=function(){return this.each(function(){k(this).chosen({allow_single_deselect:true,disable_search_threshold:15,width:parseFloat(k(this).actual("width")+25)+"px"})})};k.fn.CSFRAMEWORK_IMAGE_SELECTOR=function(){return this.each(function(){k(this).find("label").on("click",function(){k(this).siblings().find("input").prop("checked",false)})})};k.fn.CSFRAMEWORK_SORTER=function(){return this.each(function(){var a=k(this),c=a.find(".cs-enabled"),b=a.find(".cs-disabled");c.sortable({connectWith:b,placeholder:"ui-sortable-placeholder",update:function(e,d){var f=d.item.find("input");if(d.item.parent().hasClass("cs-enabled")){f.attr("name",f.attr("name").replace("disabled","enabled"))}else{f.attr("name",f.attr("name").replace("enabled","disabled"))}}});b.sortable({connectWith:c,placeholder:"ui-sortable-placeholder"})})};k.fn.CSFRAMEWORK_UPLOADER=function(){return this.each(function(){var d=k(this),a=d.find(".cs-add"),b=d.find("input"),c;a.on("click",function(e){e.preventDefault();if(typeof wp==="undefined"||!wp.media||!wp.media.gallery){return}if(c){c.open();return}c=wp.media({title:a.data("frame-title"),library:{type:a.data("upload-type")},button:{text:a.data("insert-title")}});c.on("select",function(){var f=c.state().get("selection").first();b.val(f.attributes.url).trigger("change")});c.open()})})};k.fn.CSFRAMEWORK_IMAGE_UPLOADER=function(){return this.each(function(){var d=k(this),a=d.find(".cs-add"),e=d.find(".cs-image-preview"),n=d.find(".cs-remove"),b=d.find("input"),f=d.find("img"),c;a.on("click",function(m){m.preventDefault();if(typeof wp==="undefined"||!wp.media||!wp.media.gallery){return}if(c){c.open();return}c=wp.media({library:{type:"image"}});c.on("select",function(){var r=c.state().get("selection").first().attributes;var q=(typeof r.sizes!=="undefined"&&typeof r.sizes.thumbnail!=="undefined")?r.sizes.thumbnail.url:r.url;e.removeClass("hidden");f.attr("src",q);b.val(r.id).trigger("change")});c.open()});n.on("click",function(m){m.preventDefault();b.val("").trigger("change");e.addClass("hidden")})})};k.fn.CSFRAMEWORK_IMAGE_GALLERY=function(){return this.each(function(){var c=k(this),n=c.find(".cs-edit"),e=c.find(".cs-remove"),f=c.find("ul"),a=c.find("input"),d=c.find("img"),b;c.on("click",".cs-add, .cs-edit",function(m){var v=k(this),u=a.val(),s=(v.hasClass("cs-edit"))?"edit":"add",t=(s==="add"&&!u.length)?"gallery":"gallery-edit";m.preventDefault();if(typeof wp==="undefined"||!wp.media||!wp.media.gallery){return}if(t==="gallery"){b=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:true});b.open()}else{b=wp.media.gallery.edit('[gallery ids="'+u+'"]');if(s==="add"){b.setState("gallery-library")}}b.on("update",function(o){var q="";var p=[];o.models.map(function(y){var z=y.toJSON();var r=(typeof z.sizes.thumbnail!=="undefined")?z.sizes.thumbnail.url:z.url;q+='<li><img src="'+r+'"></li>';p.push(z.id)});a.val(p).trigger("change");f.html("").append(q);e.removeClass("hidden");n.removeClass("hidden")})});e.on("click",function(m){m.preventDefault();f.html("");a.val("").trigger("change");e.addClass("hidden");n.addClass("hidden")})})};k.fn.CSFRAMEWORK_TYPOGRAPHY=function(){return this.each(function(){var b=k(this),d=b.find(".cs-typo-family"),c=b.find(".cs-typo-variant"),a=b.find(".cs-typo-font");d.on("change",function(){var e=k(this),f=e.find(":selected").data("type")||"custom",n=e.find(":selected").data("variants");if(c.length){c.find("option").remove();k.each(n.split("|"),function(p,m){c.append('<option value="'+m+'">'+m+"</option>")});c.find('option[value="regular"]').attr("selected","selected").trigger("chosen:updated")}a.val(f)})})};k.fn.CSFRAMEWORK_GROUP=function(){return this.each(function(){var a=k(this),b=a.find(".cs-groups"),e=a.find(".cs-accordion"),c=a.find(".cs-group:first").clone();if(e.length){e.accordion({header:".cs-group-title",collapsible:true,active:false,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(n,f){k(f.newPanel).CSFRAMEWORK_DEPENDENCY("sub")}})}b.sortable({axis:"y",handle:".cs-group-title",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(f,p){var o=p.item.children(".cs-group-content");if(o.css("display")==="block"){o.hide();b.sortable("refreshPositions")}},stop:function(n,f){f.item.children(".cs-group-title").triggerHandler("focusout");e.accordion({active:false})}});var d=0;k(".cs-add-group",a).on("click",function(f){f.preventDefault();c.find("input, select, textarea").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(p,m){return"["+(parseInt(m,10)+1)+"]"})});var n=c.clone().removeClass("hidden");b.append(n);if(e.length){b.accordion("refresh");b.accordion({active:n.index()})}b.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")});n.CSFRAMEWORK_DEPENDENCY("sub");n.CSFRAMEWORK_RELOAD_PLUGINS();d++});b.on("click",".cs-remove-group",function(f){f.preventDefault();k(this).closest(".cs-group").remove()})})};k.fn.CSFRAMEWORK_CONFIRM=function(){return this.each(function(){k(this).on("click",function(a){if(!confirm("Are you sure?")){a.preventDefault()}})})};k.fn.CSFRAMEWORK_SAVE=function(){return this.each(function(){var a=k(this),b=a.data("save"),c=a.val(),d=k("#cs-save-ajax");k(h).on("keydown",function(e){if(e.ctrlKey||e.metaKey){if(String.fromCharCode(e.which).toLowerCase()==="s"){e.preventDefault();a.trigger("click")}}});a.on("click",function(e){if(d.length){if(typeof tinyMCE==="object"){tinyMCE.triggerSave()}a.prop("disabled",true).attr("value",b);var f=k("#csframework_form").serialize();k.post("options.php",f).error(function(){alert("Error, Please try again.")}).success(function(){a.prop("disabled",false).attr("value",c);d.hide().fadeIn().delay(250).fadeOut()});e.preventDefault()}else{a.addClass("disabled").attr("value",b)}})})};k.fn.CSFRAMEWORK_TAXONOMY=function(){return this.each(function(){var c=k(this),d=c.parent();if(d.attr("id")==="addtag"){var p=d.find("#submit"),a=d.find("#tag-name"),o=d.find(".cs-framework"),e=o.find(".cs-element").clone(),f=k("#the-list"),b=false;p.on("click",function(){if(!b){f.on("DOMNodeInserted",function(){if(b){o.empty();o.html(e);e=e.clone();o.CSFRAMEWORK_RELOAD_PLUGINS();o.CSFRAMEWORK_DEPENDENCY();b=false}})}b=true})}})};if(typeof k.widget!=="undefined"&&typeof k.ui!=="undefined"&&typeof k.ui.dialog!=="undefined"){k.widget("ui.dialog",k.ui.dialog,{_createOverlay:function(){this._super();if(!this.options.modal){return}this._on(this.overlay,{click:"close"})}})}k.CSFRAMEWORK.ICONS_MANAGER=function(){var c=this,a=true,b;c.init=function(){j.on("click",".cs-icon-add",function(s){s.preventDefault();var t=k(this),d=k("#cs-icon-dialog"),f=d.find(".cs-dialog-load"),q=d.find(".cs-dialog-select"),r=d.find(".cs-dialog-insert"),e=d.find(".cs-icon-search");b=t.closest(".cs-icon-select");d.dialog({width:850,height:700,modal:true,resizable:false,closeOnEscape:true,position:{my:"center",at:"center",of:l},open:function(){j.addClass("cs-icon-scrolling");k(".ui-dialog-titlebar-close").addClass("ui-button");k(l).on("resize",function(){var o=k(l).height(),m=Math.floor(o-237),n=Math.floor(o-125);d.dialog("option","height",n).parent().css("max-height",n);d.css("overflow","auto");f.css("height",m)}).resize()},close:function(){j.removeClass("cs-icon-scrolling")}});if(a){k.ajax({type:"POST",url:ajaxurl,data:{action:"cs-get-icons"},success:function(m){f.html(m);a=false;f.on("click","a",function(n){n.preventDefault();var o=k(this).data("cs-icon");b.find("i").removeAttr("class").addClass(o);b.find("input").val(o).trigger("change");b.find(".cs-icon-preview").removeClass("hidden");b.find(".cs-icon-remove").removeClass("hidden");d.dialog("close")});e.keyup(function(){var n=k(this).val(),o=f.find("a");o.each(function(){var p=k(this);if(p.data("cs-icon").search(new RegExp(n,"i"))<0){p.hide()}else{p.show()}})});f.find(".cs-icon-tooltip").cstooltip({html:true,placement:"top",container:"body"})}})}});j.on("click",".cs-icon-remove",function(d){d.preventDefault();var e=k(this),f=e.closest(".cs-icon-select");f.find(".cs-icon-preview").addClass("hidden");f.find("input").val("").trigger("change");e.addClass("hidden")})};c.init()};k.CSFRAMEWORK.SHORTCODE_MANAGER=function(){var a=this,b;a.init=function(){var v=k("#cs-shortcode-dialog"),f=v.find(".cs-dialog-insert"),y=v.find(".cs-dialog-load"),z=v.find(".cs-dialog-select"),w=false,c,e,x,t,d;j.on("click",".cs-shortcode",function(m){m.preventDefault();z.CSFRAMEWORK_CHOSEN();t=k(this);w=t.hasClass("cs-shortcode-textarea");d=t.data("editor-id");v.dialog({width:850,height:700,modal:true,resizable:false,closeOnEscape:true,position:{my:"center",at:"center",of:l},open:function(){j.addClass("cs-shortcode-scrolling");k(".ui-dialog-titlebar-close").addClass("ui-button");k(l).on("resize",function(){var p=k(l).height(),n=Math.floor(p-281),o=Math.floor(p-125);v.dialog("option","height",o).parent().css("max-height",o);v.css("overflow","auto");y.css("height",n)}).resize()},close:function(){w=false;j.removeClass("cs-shortcode-scrolling")}})});z.on("change",function(){var m=k(this);c=m.val();e=m.find(":selected").data("view");if(c.length){k.ajax({type:"POST",url:ajaxurl,data:{action:"cs-get-shortcode",shortcode:c},success:function(n){y.html(n);f.parent().removeClass("hidden");x=k(".cs-shortcode-clone",v).clone();y.CSFRAMEWORK_DEPENDENCY();y.CSFRAMEWORK_DEPENDENCY("sub");y.CSFRAMEWORK_RELOAD_PLUGINS()}})}else{f.parent().addClass("hidden");y.html("")}});f.on("click",function(m){m.preventDefault();var n="",q="data-atts",o="data-clone-atts",p="data-clone-id";switch(e){case"contents":k("["+q+"]",".cs-dialog-load").each(function(){var s=k(this),B=s.data("atts");n+="["+B+"]";n+=s.val();n+="[/"+B+"]"});break;case"clone":n+="["+c;k("["+q+"]",".cs-dialog-load .cs-element:not(.hidden)").each(function(){var s=k(this),B=s.data("atts");n+=a.validate_atts(B,s)});n+="]";k("["+p+"]",".cs-dialog-load").each(function(){var B=k(this),s=B.data("clone-id");n+="["+s;k("["+o+"]",B.find(".cs-element").not(".hidden")).each(function(){var D=k(this),A=D.data("clone-atts");if(A!=="content"){n+=a.validate_atts(A,D)}else{if(A==="content"){n+="]";n+=D.val();n+="[/"+s+""}}});n+="]"});n+="[/"+c+"]";break;case"clone_duplicate":k("["+p+"]",".cs-dialog-load").each(function(){var B=k(this),s=B.data("clone-id");n+="["+s;k("["+o+"]",B.find(".cs-element").not(".hidden")).each(function(){var D=k(this),A=D.data("clone-atts");if(A!=="content"){n+=a.validate_atts(A,D)}else{if(A==="content"){n+="]";n+=D.val();n+="[/"+s+""}}});n+="]"});break;default:n+="["+c;k("["+q+"]",".cs-dialog-load .cs-element:not(.hidden)").each(function(){var s=k(this),B=s.data("atts");if(B!=="content"){n+=a.validate_atts(B,s)}else{if(B==="content"){n+="]";n+=s.val();n+="[/"+c+""}}});n+="]";break}if(w){var r=t.next();r.val(a.insertAtChars(r,n)).trigger("change")}else{a.send_to_editor(n,d)}b=null;v.dialog("close")});var u=0;v.on("click","#shortcode-clone-button",function(m){m.preventDefault();var n=x.clone().hide();n.find("input:radio").attr("name","_nonce_"+u);k(".cs-shortcode-clone:last").after(n);n.slideDown(100);n.find(".cs-remove-clone").show().on("click",function(o){n.slideUp(100,function(){n.remove()});o.preventDefault()});n.CSFRAMEWORK_DEPENDENCY("sub");n.CSFRAMEWORK_RELOAD_PLUGINS();u++})};a.validate_atts=function(d,c){var e;if(c.data("check")!==i&&b===d){return""}b=d;if(c.closest(".pseudo-field").hasClass("hidden")===true){return""}if(c.hasClass("pseudo")===true){return""}if(c.is(":checkbox")||c.is(":radio")){e=c.is(":checked")?c.val():""}else{e=c.val()}if(c.data("check")!==i){e=c.closest(".cs-element").find("input:checked").map(function(){return k(this).val()}).get()}if(e!==null&&e!==i&&e!==""&&e.length!==0){return" "+d+'="'+e+'"'}return""};a.insertAtChars=function(c,e){var d=(typeof c[0].name!=="undefined")?c[0]:c;if(d.value.length&&typeof d.selectionStart!=="undefined"){d.focus();return d.value.substring(0,d.selectionStart)+e+d.value.substring(d.selectionEnd,d.value.length)}else{d.focus();return e}};a.send_to_editor=function(f,c){var e;if(typeof tinymce!=="undefined"){e=tinymce.get(c)}if(e&&!e.isHidden()){e.execCommand("mceInsertContent",false,f)}else{var d=k("#"+c);d.val(a.insertAtChars(d,f)).trigger("change")}};a.init()};if(typeof Color==="function"){Color.fn.toString=function(){if(this._alpha<1){return this.toCSS("rgba",this._alpha).replace(/\s+/g,"")}var a=parseInt(this._color,10).toString(16);if(this.error){return""}if(a.length<6){for(var b=6-a.length-1;b>=0;b--){a="0"+a}}return"#"+a}}k.CSFRAMEWORK.PARSE_COLOR_VALUE=function(a){var c=a.replace(/\s+/g,""),b=(c.indexOf("rgba")!==-1)?parseFloat(c.replace(/^.*,(.+)\)/,"$1")*100):100,d=(b<100)?true:false;return{value:c,alpha:b,rgba:d}};k.fn.CSFRAMEWORK_COLORPICKER=function(){return this.each(function(){var a=k(this);if(a.data("rgba")!==false){var b=k.CSFRAMEWORK.PARSE_COLOR_VALUE(a.val());a.wpColorPicker({clear:function(){a.trigger("keyup")},change:function(e,d){var c=d.color.toString();a.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",c);a.val(c).trigger("change")},create:function(){var o=a.data("a8cIris"),c=a.closest(".wp-picker-container"),p=k('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(c.find(".wp-picker-holder")),e=p.find(".cs-alpha-slider"),f=p.find(".cs-alpha-text"),d=p.find(".cs-alpha-slider-offset");e.slider({slide:function(r,n){var m=parseFloat(n.value/100);o._color._alpha=m;a.wpColorPicker("color",o._color.toString());f.text((m<1?m:""))},create:function(){var m=parseFloat(b.alpha/100),n=m<1?m:"";f.text(n);d.css("background-color",b.value);c.on("click",".wp-picker-clear",function(){o._color._alpha=1;f.text("").trigger("change");e.slider("option","value",100).trigger("slide")});c.on("click",".wp-picker-default",function(){var t=k.CSFRAMEWORK.PARSE_COLOR_VALUE(a.data("default-color")),v=parseFloat(t.alpha/100),u=v<1?v:"";o._color._alpha=v;f.text(u);e.slider("option","value",t.alpha).trigger("slide")});c.on("click",".wp-color-result",function(){p.toggle()});j.on("click.wpcolorpicker",function(){p.hide()})},value:b.alpha,step:1,min:1,max:100})}})}else{a.wpColorPicker({clear:function(){a.trigger("keyup")},change:function(d,c){a.val(c.color.toString()).trigger("change")}})}})};k.CSFRAMEWORK.WIDGET_RELOAD_PLUGINS=function(){k(h).on("widget-added widget-updated",function(b,a){a.CSFRAMEWORK_RELOAD_PLUGINS();a.CSFRAMEWORK_DEPENDENCY()})};k.fn.CSFRAMEWORK_TOOLTIP=function(){return this.each(function(){var a=(g)?"right":"left";k(this).cstooltip({html:true,placement:a,container:"body"})})};k.fn.CSFRAMEWORK_RELOAD_PLUGINS=function(){return this.each(function(){k(".chosen",this).CSFRAMEWORK_CHOSEN();k(".cs-field-image-select",this).CSFRAMEWORK_IMAGE_SELECTOR();k(".cs-field-image",this).CSFRAMEWORK_IMAGE_UPLOADER();k(".cs-field-gallery",this).CSFRAMEWORK_IMAGE_GALLERY();k(".cs-field-sorter",this).CSFRAMEWORK_SORTER();k(".cs-field-upload",this).CSFRAMEWORK_UPLOADER();k(".cs-field-typography",this).CSFRAMEWORK_TYPOGRAPHY();k(".cs-field-color-picker",this).CSFRAMEWORK_COLORPICKER();k(".cs-help",this).CSFRAMEWORK_TOOLTIP()})};k(h).ready(function(){k(".cs-framework").CSFRAMEWORK_TAB_NAVIGATION();k(".cs-reset-confirm, .cs-import-backup").CSFRAMEWORK_CONFIRM();k(".cs-content, .wp-customizer, .widget-content, .cs-taxonomy").CSFRAMEWORK_DEPENDENCY();k(".cs-field-group").CSFRAMEWORK_GROUP();k(".cs-save").CSFRAMEWORK_SAVE();k(".cs-taxonomy").CSFRAMEWORK_TAXONOMY();k(".cs-framework, #widgets-right").CSFRAMEWORK_RELOAD_PLUGINS();k.CSFRAMEWORK.ICONS_MANAGER();k.CSFRAMEWORK.SHORTCODE_MANAGER();k.CSFRAMEWORK.WIDGET_RELOAD_PLUGINS()})})(jQuery,window,document);