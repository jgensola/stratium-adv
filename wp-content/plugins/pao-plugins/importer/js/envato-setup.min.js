var EnvatoWizard=(function(b){var k;function f(m,n){if(!m){return false}var o,l,p;b(m).each(function(){p=b(this);l=p.data("s-hidden");o=p.closest(n);o=o.length?o:p.parent();o.css("background-image","url("+this.src+")").addClass("s-back-switch");if(l){p.css("visibility","hidden")}else{p.hide()}})}b("a.button.refresh").on("click",function(l){l.preventDefault();location.reload()});function j(){var l=b(".envato-setup-content h2[data-directory]").eq(0).attr("data-directory");b(".envato-setup-content .envato-setup-actions.step.hide").hide();b(".envato-setup-content h2[data-directory]").hide();b(".envato-setup-content h2[data-directory]").eq(0).show().addClass("active");b(".envato_default_content[data-directory]").hide();b('.envato_default_content[data-directory="'+l+'"]').show();b(".custom-steps a.prev").hide()}b(".all-pages .item.lab").on("click",function(){b(".envato_default_content input").prop("checked",true);b(".envato_default_content").addClass("checkes");var l=b(".envato-setup-content h2[data-directory]").last().attr("data-directory");b(".envato-setup-content h2[data-directory]").last().show().addClass("active");b('.envato_default_content[data-directory="'+l+'"]').show();b(".envato-setup-actions .hide").show();b(".all-pages").hide()});b(".all-pages .item:not(.lab)").on("click",function(){j();b(this).addClass("checkes");b(".custom-steps").show();b(".envato-setup-actions .hide").show();b(".all-pages").hide()});b(document).on("ready",function(){f(".s-img-switch");b(".envato-setup-content h2[data-directory]").hide();b(".envato_default_content[data-directory]").hide();b(".envato_default_content input").each(function(){if(b(this).is(":checked")){b(this).parent().toggleClass("checkes")}});b(".custom-steps").hide();b(".envato-setup-actions .hide").hide()});b(window).on("load",function(){b(".importer-pages-wrap").css("opacity","1")});b("div[data-directory] label").on("click",function(l){l.stopPropagation();b(this).parent().toggleClass("checkes")});b(".custom-steps a.next").on("click",function(){var l=b(".envato-setup-content h2.active[data-directory]").next().attr("data-directory");b(".envato-setup-content h2.active[data-directory]").removeClass("active").hide().next().addClass("active").show();b(".envato_default_content[data-directory]").hide();b('.envato_default_content[data-directory="'+l+'"]').show();b(".custom-steps a.prev").show();if(b(".envato-setup-content h2.active[data-directory]").attr("data-directory")=="4.default"){b(".custom-steps").hide();b(".envato-setup-content .envato-setup-actions.step.hide").show()}else{b(".custom-steps").show();b(".envato-setup-content .envato-setup-actions.step.hide").hide()}});b(".custom-steps a.prev:not(.disable)").on("click",function(){var l=b(".envato-setup-content h2.active[data-directory]").prev().attr("data-directory");b(".envato-setup-content h2.active[data-directory]").removeClass("active").hide().prev().addClass("active").show();b(".envato_default_content[data-directory]").hide();b('.envato_default_content[data-directory="'+l+'"]').show();if(b(".envato-setup-content h2.active[data-directory]").attr("data-directory")=="1.homepages"){b(".custom-steps a.prev").hide()}else{b(".custom-steps").show();b(".envato-setup-content .envato-setup-actions.step.hide").hide()}});b(".custom-steps a.prev.disable").on("click",function(l){l.preventDefault()});var e={install_plugins:function(m){var l=new a();l.init(m)},install_content:function(l){var m=new g();m.init(l)}};function d(){b(".button-next").on("click",function(m){var l=c(this);if(!l){return false}if(b(this).data("callback")&&typeof e[b(this).data("callback")]!="undefined"){e[b(this).data("callback")](this);return false}else{i();return true}});b(".button-upload").on("click",function(l){l.preventDefault();h()});b(".theme-presets a").on("click",function(n){n.preventDefault();var l=b(this).parents("ul").first();l.find(".current").removeClass("current");var o=b(this).parents("li").first();o.addClass("current");var m=b(this).data("style");b("#new_style").val(m);return false});b(".envato_default_content .defgroup").on("change",function(){if(b(this).is(":checked")){b(".envato_default_content .defgroup").prop("checked",true)}else{b(".envato_default_content .defgroup").prop("checked",false)}})}function i(){b(".envato-setup-content").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}})}function a(){var l;var n=0;var p="";var o;var r="";function m(t){if(o){if(!o.data("done_item")){n++;o.data("done_item",1)}o.find(".spinner").css("visibility","hidden")}if(typeof t=="object"&&typeof t.message!="undefined"){o.find("span").text(t.message);if(typeof t.url!="undefined"){if(t.hash==r){o.find("span").text("failed");q()}else{r=t.hash;jQuery.post(t.url,t,function(v){s();o.find("span").text(t.message+envato_setup_params.verify_text)}).fail(m)}}else{if(typeof t.done!="undefined"){q()}else{q()}}}else{var u=b("tr.envato_default_content");if(n<u.length){o.find("span").text("ajax error")}else{o.find("span").text("Success")}q()}}function s(){if(p){jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_plugins",wpnonce:envato_setup_params.wpnonce,slug:p},m).fail(m)}}function q(){var t=false;if(o){if(!o.data("done_item")){n++;o.data("done_item",1)}o.find(".spinner").css("visibility","hidden")}var u=b(".envato-wizard-plugins li");u.each(function(){if(p==""||t){p=b(this).data("slug");o=b(this);s();t=false}else{if(b(this).data("slug")==p){t=true}}});if(n>=u.length){l()}}return{init:function(t){b(".envato-wizard-plugins").addClass("installing");l=function(){i();window.location.href=t.href};q()}}}function g(){var l;var n=0;var p="";var o;var r="";function m(t){console.dir(t);if(o){if(!o.data("done_item")){n++;o.data("done_item",1)}o.find(".spinner").css("visibility","hidden")}if(typeof t=="object"&&typeof t.message!="undefined"){o.find("span").text(t.message);if(typeof t.url!="undefined"){if(t.hash==r){o.find("span").text("failed");q()}else{r=t.hash;jQuery.post(t.url,t,m).fail(m)}}else{if(typeof t.done!="undefined"){q()}else{q()}}}else{var u=b("tr.envato_default_content");if(n<u.length){o.find("span").text("ajax error")}else{o.find("span").text("Success")}q()}}function s(){if(p){var t=o.find("input:checkbox, input:radio");if(t.is(":checked")){jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_content",wpnonce:envato_setup_params.wpnonce,content:p},m).fail(m)}else{o.find("span").text("Skipping");setTimeout(q,300)}}}function q(){var t=false;if(o){if(!o.data("done_item")){n++;o.data("done_item",1)}o.find(".spinner").css("visibility","hidden")}var v=b("div.envato_default_content");var u=b("div.envato_default_content input:checked");v.each(function(){if(p==""||t){p=b(this).data("content");o=b(this);s();t=false}else{if(b(this).data("content")==p){t=true}}});if(n>=v.length){l()}}return{init:function(t){b(".envato-setup-pages").addClass("installing");b(".envato-setup-pages").find("input").prop("disabled",true);l=function(){i();window.location.href=t.href};q()}}}function h(){var l,m;if(undefined!==l){l.open();return}l=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:false});l.on("select",function(){m=l.state().get("selection").first().toJSON();jQuery(".site-logo").attr("src",m.url);jQuery("#new_logo_id").val(m.id)});l.open()}function c(m){var l=jQuery(m);if(l.data("done-loading")=="yes"){return false}var t=l.text();var p=l.outerWidth();var s="..........----";var q=false;l.css("width",p);l.addClass("dtbaker_loading_button_current");var o=l.is("input")||l.is("button")?"val":"text";l[o](s);l.data("done-loading","yes");var r=[0,1,2];function n(){if(q){return}var v="";for(var u=0;u<r.length;u++){r[u]=r[u]+1;if(r[u]>=s.length){r[u]=0}v+=s.charAt(r[u])}l[o](v);setTimeout(function(){n()},60)}n();return{done:function(){q=true;l[o](t);l.removeClass("dtbaker_loading_button_current");l.attr("disabled",false)}}}return{init:function(){k=this;b(d)},callback:function(l){}}})(jQuery);EnvatoWizard.init();