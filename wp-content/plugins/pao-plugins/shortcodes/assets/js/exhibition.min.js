(function(A){function h(M,O,L){var N;return function(){var S=this,R=arguments;var Q=function(){N=null;if(!L){M.apply(S,R)}};var P=L&&!N;clearTimeout(N);N=setTimeout(Q,O);if(P){M.apply(S,R)}}}function l(M){var L=0;var N=0;if(!M){var M=A.event}if(M.pageX||M.pageY){L=M.pageX;N=M.pageY}else{if(M.clientX||M.clientY){L=M.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;N=M.clientY+document.body.scrollTop+document.documentElement.scrollTop}}return{x:L,y:N}}var p={};p.loader=document.querySelector(".overlay--loader");p.scroller=document.querySelector(".container-wrap > .scroller");p.rooms=[].slice.call(p.scroller.querySelectorAll(".room"));p.content=document.querySelector(".content");p.nav={leftCtrl:p.content.querySelector("nav > .btn--nav-left"),rightCtrl:p.content.querySelector("nav > .btn--nav-right")};p.slides=[].slice.call(p.content.querySelectorAll(".slides > .slide"));p.menuCtrl=p.content.querySelector(".btn--menu");p.menuOverlay=p.content.querySelector(".overlay--menu");p.infoCtrl=p.content.querySelector(".btn--info");p.infoOverlay=p.content.querySelector(".overlay--info");var z=0,H=p.rooms.length,x={translateX:0,translateY:0,translateZ:"500px",rotateX:0,rotateY:0,rotateZ:0},a={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0},d={translateX:0,translateY:"150%",translateZ:0,rotateX:"15deg",rotateY:0,rotateZ:0},d={translateX:0,translateY:"50%",translateZ:0,rotateX:"-10deg",rotateY:0,rotateZ:0},n={translateX:0,translateY:0,translateZ:"200px",rotateX:"2deg",rotateY:0,rotateZ:"4deg"},o={speed:"0.9s",easing:"ease"},I={speed:"0.4s",easing:"ease"},i={speed:"1.5s",easing:"cubic-bezier(0.2,1,0.3,1)"},w={speed:"15s",easing:"cubic-bezier(0.3,1,0.3,1)"},s={speed:"0.2s",easing:"ease-out"},K=false,j={rotateX:1,rotateY:-3},J=function(L,N){var M=function(O){this.removeEventListener("transitionend",M);if(N&&typeof N==="function"){N.call()}};L.addEventListener("transitionend",M)},B={width:A.innerWidth,height:A.innerHeight},g,F;function E(){k({transition:o,transform:x}).then(function(){C()});r(100);f()}function C(){v(s);K=true}function t(){K=false}function k(L){return new Promise(function(O,N){if(g&&!L.stopTransition){return false}g=true;if(L.transition){v(L.transition)}if(L.transform){c(L.transform);var M=function(){g=false;O()};J(p.scroller,M)}else{O()}})}function f(){var N=function(P){requestAnimationFrame(function(){if(!K){return false}var Q=l(P),S=j.rotateX?x.rotateX-(2*j.rotateX/B.height*Q.y-j.rotateX):0,R=j.rotateY?x.rotateY-(2*j.rotateY/B.width*Q.x-j.rotateY):0;c({translateX:x.translateX,translateY:x.translateY,translateZ:x.translateZ,rotateX:S+"deg",rotateY:R+"deg",rotateZ:x.rotateZ})})},L=h(function(){B={width:A.innerWidth,height:A.innerHeight}},10);document.addEventListener("mousemove",N);A.addEventListener("resize",L);var O=function(){e("prev")},M=function(){e("next")};p.nav.leftCtrl.addEventListener("click",O);p.nav.rightCtrl.addEventListener("click",M)}function c(L){p.scroller.style.transform="translate3d("+L.translateX+", "+L.translateY+", "+L.translateZ+") rotate3d(1,0,0,"+L.rotateX+") rotate3d(0,1,0,"+L.rotateY+") rotate3d(0,0,1,"+L.rotateZ+")"}function v(L){p.scroller.style.transition=L==="none"?L:"transform "+L.speed+" "+L.easing}function D(O,N){var L=p.slides[z],M=L.querySelector(".slide__name");N=N!==undefined?N:0;anime.remove([M]);var P={targets:[M],duration:O==="in"?400:400,delay:function(R,Q,S){return N+75+Q*75},easing:[0.25,0.1,0.25,1],opacity:{value:O==="in"?[0,1]:[1,0],duration:O==="in"?550:250},translateY:function(R,Q){return O==="in"?[150,0]:[0,-150]}};if(O==="in"){P.begin=function(){L.classList.add("slide--current")}}else{P.complete=function(){L.classList.remove("slide--current")}}anime(P)}function r(L){D("in",L)}function u(L){D("out",L)}function e(M){if(g||F){return false}F=true;var N=p.rooms[z];t();u();if(M==="next"){z=z<H-1?z+1:0}else{z=z>0?z-1:H-1}var L=p.rooms[z];L.style.transform="translate3d("+(M==="next"?100:-100)+"%,0,0) translate3d("+(M==="next"?1:-1)+"px,0,0)";L.style.opacity=1;k({transition:I,transform:a}).then(function(){return k({transform:{translateX:(M==="next"?-100:100)+"%",translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0}})}).then(function(){L.classList.add("room--current");N.classList.remove("room--current");N.style.opacity=0;r();return k({transform:{translateX:(M==="next"?-100:100)+"%",translateY:0,translateZ:"500px",rotateX:0,rotateY:0,rotateZ:0}})}).then(function(){v("none");L.style.transform="translate3d(0,0,0)";c(x);setTimeout(function(){C()},60);F=false})}function G(){var N=p.rooms[z],L=p.rooms[z<H-1?z+1:0],M=p.rooms[z>0?z-1:H-1];L.style.transform="translate3d(100%,0,0) translate3d(3px,0,0)";L.style.opacity=1;M.style.transform="translate3d(-100%,0,0) translate3d(-3px,0,0)";M.style.opacity=1}function b(){var N=p.rooms[z],L=p.rooms[z<H-1?z+1:0],M=p.rooms[z>0?z-1:H-1];L.style.transform="none";L.style.opacity=0;M.style.transform="none";M.style.opacity=0}function q(){if(F){return false}if(p.infoCtrl.classList.contains("btn--active")){m()}else{y()}}function y(){p.infoCtrl.classList.add("btn--active");t();u();v(w);k({transform:n,stopTransition:true});var M=p.rooms[z].querySelectorAll(".room__img");anime.remove(M);anime({targets:M,duration:function(){return anime.random(15000,30000)},easing:[0.3,1,0.3,1],translateY:function(){return anime.random(-50,50)},rotateX:function(){return anime.random(-2,2)},rotateZ:function(){return anime.random(-5,5)},translateZ:function(){return[10,anime.random(50,B.width/3)]}});anime.remove([p.infoOverlay,p.infoText]);var L={targets:[p.infoOverlay,p.infoText],duration:1500,delay:function(O,N){return !N?0:150},easing:[0.25,0.1,0.25,1],opacity:[0,1],translateY:function(O,N){return !N?0:[30,0]},begin:function(){p.infoOverlay.classList.add("overlay--active")}};anime(L)}function m(){p.infoCtrl.classList.remove("btn--active");v(I);r(100);k({transform:x,stopTransition:true}).then(function(){C()});var M=p.rooms[z].querySelectorAll(".room__img");anime.remove(M);anime({targets:M,duration:400,easing:[0.3,1,0.3,1],translateY:0,rotateX:0,rotateZ:0,translateZ:10});anime.remove([p.infoOverlay,p.infoText]);var L={targets:[p.infoOverlay,p.infoText],duration:400,easing:[0.25,0.1,0.25,1],opacity:[1,0],translateY:function(O,N){return !N?0:[0,30]},complete:function(){p.infoOverlay.classList.remove("overlay--active")}};anime(L)}imagesLoaded(p.scroller,function(){var L=1000;anime({targets:p.loader,duration:600,easing:"easeInOutCubic",delay:L,translateY:"-100%",begin:function(){E()},complete:function(){p.loader.classList.remove("overlay--active")}})})})(window);