/*!
 * multiscroll.js 0.2.1
 * https://github.com/alvarotrigo/multiscroll.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
(function(d,c,a,b,e){d.fn.multiscroll=function(F){var ab=d.fn.multiscroll;F=d.extend({verticalCentered:true,scrollingSpeed:700,easing:"easeInQuart",menu:false,sectionsColor:[],anchors:[],navigation:false,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:false,loopTop:false,css3:false,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:true,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},F);var z=600;var H=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/);var n=(("ontouchstart" in c)||(navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints));if(F.rightSelector!==".ms-right"){d(F.rightSelector).addClass("ms-right")}if(F.leftSelector!==".ms-left"){d(F.leftSelector).addClass("ms-left")}var K=d(".ms-left").find(".ms-section").length;var j=false;var s;var aa=d(c).height();var P=r();var I={touchmove:"ontouchmove" in c?"touchmove":P.move,touchstart:"ontouchstart" in c?"touchstart":P.down};var q;L();l();if(F.css3){F.css3=J()}d("html, body").css({overflow:"hidden",height:"100%"});if(F.sectionSelector!==".ms-section"){d(F.sectionSelector).each(function(){d(this).addClass("ms-section")})}if(F.navigation){d("body").append('<div id="multiscroll-nav"><ul></ul></div>');s=d("#multiscroll-nav");s.css("color",F.navigationColor);s.addClass(F.navigationPosition)}d(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"});d(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"});d(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"});d(".ms-left .ms-section, .ms-right .ms-section").each(function(){var ae=d(this).index();if(F.paddingTop||F.paddingBottom){d(this).css("padding",F.paddingTop+" 0 "+F.paddingBottom+" 0")}if(typeof F.sectionsColor[ae]!=="undefined"){d(this).css("background-color",F.sectionsColor[ae])}if(typeof F.anchors[ae]!=="undefined"){d(this).attr("data-anchor",F.anchors[ae])}if(F.verticalCentered){x(d(this))}if(d(this).closest(".ms-left").length&&F.navigation){var ac="";if(F.anchors.length){ac=F.anchors[ae]}var ad=F.navigationTooltips[ae];if(typeof ad==="undefined"){ad=""}if(F.navigation){s.find("ul").append('<li data-tooltip="'+ad+'"><a href="#'+ac+'"><span></span></a></li>')}}});d(".ms-right").html(d(".ms-right").find(".ms-section").get().reverse());d(".ms-left .ms-section, .ms-right .ms-section").each(function(){var ac=d(this).index();d(this).css({height:"100%"});if(!ac&&F.navigation){s.find("li").eq(ac).find("a").addClass("active")}}).promise().done(function(){if(!d(".ms-left .ms-section.active").length){d(".ms-right").find(".ms-section").last().addClass("active");d(".ms-left").find(".ms-section").first().addClass("active")}if(F.navigation){s.css("margin-top","-"+(s.height()/2)+"px")}d.isFunction(F.afterRender)&&F.afterRender.call(this);C();Q();d(c).on("load",function(){h()})});d(c).on("hashchange",W);function W(){var ae=c.location.hash.replace("#","");var ad=ae;if(ad.length){var af=d(".ms-left").find('[data-anchor="'+ad+'"]');var ac=(typeof lastScrolledDestiny==="undefined");if(ac||ad!==lastScrolledDestiny){v(af)}}}d(a).keydown(M);var p;function M(af){clearTimeout(p);var ac=d(a.activeElement);if(!ac.is("textarea")&&!ac.is("input")&&!ac.is("select")&&F.keyboardScrolling){var ae=af.which;var ad=[40,38,32,33,34];if(d.inArray(ae,ad)>-1){af.preventDefault()}p=setTimeout(function(){w(af)},150)}}function w(ad){var ac=ad.shiftKey;switch(ad.which){case 38:case 33:ab.moveSectionUp();break;case 32:if(ac){ab.moveSectionUp();break}case 40:case 34:ab.moveSectionDown();break;case 36:ab.moveTo(1);break;case 35:ab.moveTo(d(".ms-left .ms-section").length);break;default:return}}d(a).mousedown(function(ac){if(ac.button==1){ac.preventDefault();return false}});function U(ad){ad.preventDefault();var ac=d(this).parent().index();v(d(".ms-left .ms-section").eq(ac))}d(a).on("click","#multiscroll-nav a",U);function S(){var ac=d(this).data("tooltip");d('<div class="multiscroll-tooltip '+F.navigationPosition+'">'+ac+"</div>").hide().appendTo(d(this)).fadeIn(200)}function Y(){d(this).find(".multiscroll-tooltip").fadeOut(200,function(){d(this).remove()})}d(a).on({mouseenter:S,mouseleave:Y},"#multiscroll-nav li");if(F.normalScrollElements){d(a).on("mouseenter",F.normalScrollElements,function(){ab.setMouseWheelScrolling(false)});d(a).on("mouseleave",F.normalScrollElements,function(){ab.setMouseWheelScrolling(true)})}d(c).on("resize",R);var N=aa;function R(){if(H){var ac=d(a.activeElement);if(!ac.is("textarea")&&!ac.is("input")&&!ac.is("select")){var ad=d(c).height();if(b.abs(ad-N)>(20*b.max(N,ad)/100)){Z(true);N=ad}}}else{clearTimeout(q);q=setTimeout(function(){Z(true)},350)}}function Z(ac){aa=d(c).height();d(".ms-tableCell").each(function(){d(this).css({height:m(d(this).parent())})});if(F.scrollOverflow){scrollBarHandler.createScrollBarForAll()}C();d.isFunction(F.afterResize)&&F.afterResize.call(this)}function C(){if(F.css3){T(d(".ms-left"),"translate3d(0px, -"+d(".ms-left").find(".ms-section.active").position().top+"px, 0px)",false);T(d(".ms-right"),"translate3d(0px, -"+d(".ms-right").find(".ms-section.active").position().top+"px, 0px)",false)}else{d(".ms-left").css("top",-d(".ms-left").find(".ms-section.active").position().top);d(".ms-right").css("top",-d(".ms-right").find(".ms-section.active").position().top)}}ab.moveSectionUp=function(){var ac=d(".ms-left .ms-section.active").prev(".ms-section");if(!ac.length&&F.loopTop){ac=d(".ms-left .ms-section").last()}if(ac.length){v(ac)}};ab.moveSectionDown=function(){var ac=d(".ms-left .ms-section.active").next(".ms-section");if(!ac.length&&F.loopBottom){ac=d(".ms-left .ms-section").first()}if(ac.length){v(ac)}};ab.moveTo=function(ad){var ac="";if(isNaN(ad)){ac=d('.ms-left [data-anchor="'+ad+'"]')}else{ac=d(".ms-left .ms-section").eq((ad-1))}v(ac)};function v(af){var al=af.index();var ag=d(".ms-right").find(".ms-section").eq(K-1-al);var ac=K-1-al;var ae=af.data("anchor");var am=d(".ms-left .ms-section.active");var ad=am.index()+1;var ai=O(af);j=true;var ah={left:af.position().top,right:ag.position().top};ag.addClass("active").siblings().removeClass("active");af.addClass("active").siblings().removeClass("active");y(ae);if(F.css3){d.isFunction(F.onLeave)&&F.onLeave.call(this,ad,(al+1),ai);var aj="translate3d(0px, -"+ah.left+"px, 0px)";var ak="translate3d(0px, -"+ah.right+"px, 0px)";T(d(".ms-left"),aj,true);T(d(".ms-right"),ak,true);setTimeout(function(){d.isFunction(F.afterLoad)&&F.afterLoad.call(this,ae,(al+1));setTimeout(function(){j=false},z)},F.scrollingSpeed)}else{d.isFunction(F.onLeave)&&F.onLeave.call(this,ad,(al+1),ai);d(".ms-left").animate({top:-ah.left},F.scrollingSpeed,F.easing,function(){d.isFunction(F.afterLoad)&&F.afterLoad.call(this,ae,(al+1));setTimeout(function(){j=false},z)});d(".ms-right").animate({top:-ah.right},F.scrollingSpeed,F.easing)}lastScrolledDestiny=ae;i(ae);t(ae,al)}function o(){if(a.addEventListener){a.removeEventListener("mousewheel",V,false);a.removeEventListener("wheel",V,false)}else{a.detachEvent("onmousewheel",V)}}function L(){if(a.addEventListener){a.addEventListener("mousewheel",V,false);a.addEventListener("wheel",V,false)}else{a.attachEvent("onmousewheel",V)}}function V(ac){ac=c.event||ac;var ad=b.max(-1,b.min(1,(ac.wheelDelta||-ac.deltaY||-ac.detail)));if(!j){if(ad<0){ab.moveSectionDown()}else{ab.moveSectionUp()}}return false}function T(ac,ad,ae){ac.toggleClass("ms-easing",ae);ac.css(k(ad))}function k(ac){return{"-webkit-transform":ac,"-moz-transform":ac,"-ms-transform":ac,transform:ac}}function t(ac,ad){if(F.navigation){d("#multiscroll-nav").find(".active").removeClass("active");if(ac){d("#multiscroll-nav").find('a[href="#'+ac+'"]').addClass("active")}else{d("#multiscroll-nav").find("li").eq(ad).find("a").addClass("active")}}}function i(ac){if(F.menu){d(F.menu).find(".active").removeClass("active");d(F.menu).find('[data-menuanchor="'+ac+'"]').addClass("active")}}function O(ad){var ac=d(".ms-left .ms-section.active").index();var ae=ad.index();if(ac>ae){return"up"}return"down"}function y(ac){if(F.anchors.length){location.hash=ac}Q()}function Q(){var af=d(".ms-left .ms-section.active");var ad=af.data("anchor");var ae=af.index();var ag=String(ae);if(F.anchors.length){ag=ad}ag=ag.replace("/","-").replace("#","");var ac=new RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");d("body")[0].className=d("body")[0].className.replace(ac,"");d("body").addClass("ms-viewing-"+ag)}function J(){var ae=a.createElement("p"),af,ad={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};a.body.insertBefore(ae,null);for(var ac in ad){if(ae.style[ac]!==e){ae.style[ac]="translate3d(1px,1px,1px)";af=c.getComputedStyle(ae).getPropertyValue(ad[ac])}}a.body.removeChild(ae);return(af!==e&&af.length>0&&af!=="none")}function x(ac){ac.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+m(ac)+'px" />')}function m(ae){var ad=aa;if(F.paddingTop||F.paddingBottom){var ac=parseInt(ae.css("padding-top"))+parseInt(ae.css("padding-bottom"));ad=(aa-ac)}return ad}function h(){var ac=c.location.hash.replace("#","");var ad=d('.ms-left .ms-section[data-anchor="'+ac+'"]');if(ac.length){v(ad)}}ab.setKeyboardScrolling=function(ac){F.keyboardScrolling=ac};ab.setMouseWheelScrolling=function(ac){if(ac){L()}else{o()}};ab.setScrollingSpeed=function(ac){F.scrollingSpeed=ac};var B=0;var E=0;var f=0;var g=0;function G(ae){var af=ae.originalEvent;if(D(af)){af.preventDefault();var ac=d(".ms-left .ms-section.active");if(!j){var ad=u(af);f=ad.y;g=ad.x;if(b.abs(B-f)>(d(c).height()/100*F.touchSensitivity)){if(B>f){ab.moveSectionDown()}else{if(f>B){ab.moveSectionUp()}}}}}}function D(ac){return typeof ac.pointerType==="undefined"||ac.pointerType!="mouse"}function A(ad){var ae=ad.originalEvent;if(D(ae)){var ac=u(ae);B=ac.y;E=ac.x}}function l(){if(n||H){d(a).off(I.touchstart).on(I.touchstart,A);d(a).off(I.touchmove).on(I.touchmove,G)}}function X(){if(n||H){d(a).off(I.touchstart);d(a).off(I.touchmove)}}function r(){var ac;if(c.PointerEvent){ac={down:"pointerdown",move:"pointermove"}}else{ac={down:"MSPointerDown",move:"MSPointerMove"}}return ac}function u(ad){var ac=[];ac.y=(typeof ad.pageY!=="undefined"&&(ad.pageY||ad.pageX)?ad.pageY:ad.touches[0].pageY);ac.x=(typeof ad.pageX!=="undefined"&&(ad.pageY||ad.pageX)?ad.pageX:ad.touches[0].pageX);if(n&&D(ad)&&typeof ad.touches!=="undefined"){ac.y=ad.touches[0].pageY;ac.x=ad.touches[0].pageX}return ac}ab.destroy=function(){ab.setKeyboardScrolling(false);ab.setMouseWheelScrolling(false);X();d(c).off("hashchange",W).off("resize",doneResizing);d(a).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")};ab.build=function(){ab.setKeyboardScrolling(true);ab.setMouseWheelScrolling(true);l();d(c).on("hashchange",W).on("resize",doneResizing);d(a).on("mouseenter","#multiscroll-nav li",S).on("mouseleave","#multiscroll-nav li",Y).on("click","#multiscroll-nav a",U)}}})(jQuery,window,document,Math);