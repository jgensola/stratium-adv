(function(){window.CanvasSlideshow=function(h){var l=this;h=h||{};h.stageWidth=h.hasOwnProperty("stageWidth")?h.stageWidth:1920;h.stageHeight=h.hasOwnProperty("stageHeight")?h.stageHeight:1080;h.pixiSprites=h.hasOwnProperty("sprites")?h.sprites:[];h.centerSprites=h.hasOwnProperty("centerSprites")?h.centerSprites:false;h.texts=h.hasOwnProperty("texts")?h.texts:[];h.autoPlay=h.hasOwnProperty("autoPlay")?h.autoPlay:true;h.autoPlaySpeed=h.hasOwnProperty("autoPlaySpeed")?h.autoPlaySpeed:[10,3];h.fullScreen=h.hasOwnProperty("fullScreen")?h.fullScreen:true;h.displaceScale=h.hasOwnProperty("displaceScale")?h.displaceScale:[200,70];h.displacementImage=h.hasOwnProperty("displacementImage")?h.displacementImage:"";h.navElement=h.hasOwnProperty("navElement")?h.navElement:document.querySelectorAll(".scene-nav");h.displaceAutoFit=h.hasOwnProperty("displaceAutoFit")?h.displaceAutoFit:false;h.wacky=h.hasOwnProperty("wacky")?h.wacky:false;h.interactive=h.hasOwnProperty("interactive")?h.interactive:false;h.interactionEvent=h.hasOwnProperty("interactionEvent")?h.interactionEvent:"";h.displaceScaleTo=(h.autoPlay===false)?[0,0]:[20,20];h.textColor=h.hasOwnProperty("textColor")?h.textColor:"#fff";h.displacementCenter=h.hasOwnProperty("displacementCenter")?h.displacementCenter:false;h.dispatchPointerOver=h.hasOwnProperty("dispatchPointerOver")?h.dispatchPointerOver:false;var u=new PIXI.autoDetectRenderer(h.stageWidth,h.stageHeight,{transparent:true});var y=new PIXI.Container();var o=new PIXI.Container();var k=new PIXI.Sprite.fromImage(h.displacementImage);var v=new PIXI.filters.DisplacementFilter(k);var x=new PIXI.TextStyle({fill:h.textColor,wordWrap:true,wordWrapWidth:400,letterSpacing:20,fontSize:14});this.currentIndex=0;this.initPixi=function(){document.body.appendChild(u.view);y.addChild(o);y.interactive=true;if(h.fullScreen===true){u.view.style.objectFit="cover";u.view.style.width="100%";u.view.style.height="100%";u.view.style.top="50%";u.view.style.left="50%";u.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)";u.view.style.transform="translate( -50%, -50% ) scale(1.2)"}else{u.view.style.maxWidth="100%";u.view.style.top="50%";u.view.style.left="50%";u.view.style.webkitTransform="translate( -50%, -50% )";u.view.style.transform="translate( -50%, -50% )"}k.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;y.filters=[v];if(h.autoPlay===false){v.scale.x=0;v.scale.y=0}if(h.wacky===true){k.anchor.set(0.5);k.x=u.width/2;k.y=u.height/2}k.scale.x=2;k.scale.y=2;v.autoFit=h.displaceAutoFit;y.addChild(k)};this.loadPixiSprites=function(H){var F=h.sprites;var B=h.texts;for(var C=0;C<F.length;C++){var E=new PIXI.Texture.fromImage(H[C]);var G=new PIXI.Sprite(E);if(B){var D=new PIXI.Text(B[C],x);G.addChild(D);D.anchor.set(0.5);D.x=G.width/2;D.y=G.height/2}if(h.centerSprites===true){G.anchor.set(0.5);G.x=u.width/2;G.y=u.height/2}if(C!==0){TweenMax.set(G,{alpha:0})}o.addChild(G)}};if(h.autoPlay===true){var z=new PIXI.ticker.Ticker();z.autoStart=h.autoPlay;z.add(function(i){k.x+=h.autoPlaySpeed[0]*i;k.y+=h.autoPlaySpeed[1];u.render(y)})}else{var A=new PIXI.ticker.Ticker();A.autoStart=true;A.add(function(i){u.render(y)})}var j=false;var r=o.children;this.moveSlider=function(i){j=true;var B=new TimelineMax({onComplete:function(){l.currentIndex=i;j=false;if(h.wacky===true){k.scale.set(1)}},onUpdate:function(){if(h.wacky===true){k.rotation+=B.progress()*0.02;k.scale.set(B.progress()*3)}}});B.clear();if(B.isActive()){return}B.to(v.scale,1,{x:h.displaceScale[0],y:h.displaceScale[1]}).to(r[l.currentIndex],0.5,{alpha:0}).to(r[i],0.5,{alpha:1}).to(v.scale,1,{x:h.displaceScaleTo[0],y:h.displaceScaleTo[1]})};var m=h.navElement;for(var w=0;w<m.length;w++){var g=m[w];g.onclick=function(i){if(j){return false}if(this.getAttribute("data-nav")==="next"){if(l.currentIndex>=0&&l.currentIndex<r.length-1){l.moveSlider(l.currentIndex+1)}else{l.moveSlider(0)}}else{if(l.currentIndex>0&&l.currentIndex<r.length){l.moveSlider(l.currentIndex-1)}else{l.moveSlider(d.length-1)}}return false}}this.init=function(){l.initPixi();l.loadPixiSprites(h.pixiSprites)};function t(){k.rotation+=0.001;s=requestAnimationFrame(t)}if(h.interactive===true){var s,p,n;o.interactive=true;o.buttonMode=true;if(h.interactionEvent==="hover"||h.interactionEvent==="both"){o.pointerover=function(i){p=i.data.global.x;n=i.data.global.y;TweenMax.to(v.scale,1,{x:"+="+Math.sin(p)*100+"",y:"+="+Math.cos(n)*100+""});t()};o.pointerout=function(i){TweenMax.to(v.scale,1,{x:0,y:0});cancelAnimationFrame(s)}}if(h.interactionEvent==="click"||h.interactionEvent==="both"){o.pointerup=function(i){if(h.dispatchPointerOver===true){TweenMax.to(v.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(v.scale,1,{x:20,y:20})}})}else{TweenMax.to(v.scale,1,{x:0,y:0});cancelAnimationFrame(s)}};o.pointerdown=function(i){p=i.data.global.x;n=i.data.global.y;TweenMax.to(v.scale,1,{x:"+="+Math.sin(p)*1200+"",y:"+="+Math.cos(n)*200+""})};o.pointerout=function(i){if(h.dispatchPointerOver===true){TweenMax.to(v.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(v.scale,1,{x:20,y:20})}})}else{TweenMax.to(v.scale,1,{x:0,y:0});cancelAnimationFrame(s)}}}}if(h.displacementCenter===true){k.anchor.set(0.5);k.x=u.view.width/2;k.y=u.view.height/2}this.init();function q(E,C){var D,B,H,i;D=window.innerWidth/E.offsetWidth;B=window.innerHeight/E.offsetHeight;H=Math.min(D,B);E.style.transformOrigin="0 0";E.style.transform="scale("+H+")";if(E.offsetWidth>E.offsetHeight){if(E.offsetWidth*H<window.innerWidth){i="horizontally"}else{i="vertically"}}else{if(E.offsetHeight*H<window.innerHeight){i="vertically"}else{i="horizontally"}}var G;if(i==="horizontally"){G=(window.innerWidth-E.offsetWidth*H)/2;E.style.marginTop=0+"px";E.style.marginBottom=0+"px";E.style.marginLeft=G+"px";E.style.marginRight=G+"px"}if(i==="vertically"){G=(window.innerHeight-E.offsetHeight*H)/2;E.style.marginTop=G+"px";E.style.marginBottom=G+"px";E.style.marginLeft=0+"px";E.style.marginRight=0+"px"}E.style.paddingLeft=0+"px";E.style.paddingRight=0+"px";E.style.paddingTop=0+"px";E.style.paddingBottom=0+"px";E.style.display="block";document.body.style.backgroundColor=C;var F=navigator.userAgent.toLowerCase();if(F.indexOf("safari")!=-1){if(F.indexOf("chrome")>-1){}else{}}return H}};var d=document.querySelectorAll(".slide-item__image");var f=[];for(var c=0;c<d.length;c++){var a=d[c];f.push(a.getAttribute("src"))}var e=document.querySelector(".disortion-wrap").getAttribute("data-image");var b=new CanvasSlideshow({sprites:f,displacementImage:e,autoPlay:true,fullScreen:true,centerSprites:true,autoPlaySpeed:[10,3],displaceScale:[200,70]})})();