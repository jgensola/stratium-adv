(function(){window.CanvasSlideshow=function(k){var n=this;k=k||{};k.stageWidth=k.hasOwnProperty("stageWidth")?k.stageWidth:1920;k.stageHeight=k.hasOwnProperty("stageHeight")?k.stageHeight:1080;k.pixiSprites=k.hasOwnProperty("sprites")?k.sprites:[];k.texts=k.hasOwnProperty("texts")?k.texts:[];k.autoPlay=k.hasOwnProperty("autoPlay")?k.autoPlay:true;k.autoPlaySpeed=k.hasOwnProperty("autoPlaySpeed")?k.autoPlaySpeed:[10,3];k.fullScreen=k.hasOwnProperty("fullScreen")?k.fullScreen:true;k.displaceScale=k.hasOwnProperty("displaceScale")?k.displaceScale:[200,70];k.displacementImage=k.hasOwnProperty("displacementImage")?k.displacementImage:"";k.navElement=k.hasOwnProperty("navElement")?k.navElement:document.querySelectorAll(".scene-nav");k.displaceAutoFit=k.hasOwnProperty("displaceAutoFit")?k.displaceAutoFit:false;k.wacky=k.hasOwnProperty("wacky")?k.wacky:false;k.interactive=k.hasOwnProperty("interactive")?k.interactive:false;k.displaceScaleTo=(k.autoPlay===false)?[0,0]:[20,20];k.textColor=k.hasOwnProperty("textColor")?k.textColor:"#fff";k.displacementCenter=k.hasOwnProperty("displacementCenter")?k.displacementCenter:false;k.dispatchPointerOver=k.hasOwnProperty("dispatchPointerOver")?k.dispatchPointerOver:false;var w=new PIXI.autoDetectRenderer(k.stageWidth,k.stageHeight,{transparent:true});var A=new PIXI.Container();var q=new PIXI.Container();var m=new PIXI.Sprite.fromImage(k.displacementImage);var x=new PIXI.filters.DisplacementFilter(m);var z=new PIXI.TextStyle({fill:k.textColor,wordWrap:true,wordWrapWidth:400,letterSpacing:20,fontSize:14});this.currentIndex=0;this.initPixi=function(){document.body.appendChild(w.view);A.addChild(q);A.interactive=true;if(k.fullScreen===true){w.view.style.objectFit="cover";w.view.style.width="100%";w.view.style.height="100%";w.view.style.top="50%";w.view.style.left="50%";w.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)";w.view.style.transform="translate( -50%, -50% ) scale(1.2)"}else{w.view.style.maxWidth="100%";w.view.style.top="50%";w.view.style.left="50%";w.view.style.webkitTransform="translate( -50%, -50% )";w.view.style.transform="translate( -50%, -50% )"}m.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;A.filters=[x];if(k.autoPlay===false){x.scale.x=0;x.scale.y=0}if(k.wacky===true){m.anchor.set(0.5);m.x=w.width/2;m.y=w.height/2}m.scale.x=2;m.scale.y=2;x.autoFit=k.displaceAutoFit;A.addChild(m)};this.loadPixiSprites=function(J){var H=k.sprites;var D=k.texts;for(var E=0;E<H.length;E++){var G=new PIXI.Texture.fromImage(J[E]);var I=new PIXI.Sprite(G);if(D){var F=new PIXI.Text(D[E],z);I.addChild(F);F.anchor.set(0.5);F.x=I.width/2;F.y=I.height/2}if(k.centerSprites===true){I.anchor.set(0.5);I.x=w.width/2;I.y=w.height/2}if(E!==0){TweenMax.set(I,{alpha:0})}q.addChild(I)}};if(k.autoPlay===true){var B=new PIXI.ticker.Ticker();B.autoStart=k.autoPlay;B.add(function(i){m.x+=k.autoPlaySpeed[0]*i;m.y+=k.autoPlaySpeed[1];m.x+=2.14*i;m.y+=22.24*i;m.rotation.x+=20.3;w.render(A)})}else{var C=new PIXI.ticker.Ticker();C.autoStart=true;C.add(function(i){w.render(A)})}var h=new PIXI.ticker.Ticker();h.autoStart=false;h.add(function(i){m.x+=2.14*i;m.y+=22.24*i;m.rotation.x+=20.3});var l=false;var t=q.children;this.moveSlider=function(i){l=true;h.start();var D=new TimelineMax({onComplete:function(){n.currentIndex=i;l=false;h.stop();if(k.wacky===true){m.scale.set(1)}},onUpdate:function(){if(k.wacky===true){m.rotation+=D.progress()*0.02;m.scale.set(D.progress()*3)}}});D.clear();if(D.isActive()){return}D.to(x.scale,1,{y:"+="+1280+"",ease:Power3.easeOut}).to(t[n.currentIndex],0.5,{alpha:0,ease:Power3.easeOut},0.4).to(t[i],0.5,{alpha:1,ease:Power3.easeInOut},0.7).to(x.scale,1,{y:20,ease:Power3.easeOut},1)};var o=k.navElement;for(var y=0;y<o.length;y++){var j=o[y];j.onclick=function(i){if(l){return false}if(this.getAttribute("data-nav")==="next"){if(n.currentIndex>=0&&n.currentIndex<t.length-1){n.moveSlider(n.currentIndex+1)}else{n.moveSlider(0)}}else{if(n.currentIndex>0&&n.currentIndex<t.length){n.moveSlider(n.currentIndex-1)}else{n.moveSlider(e.length-1)}}return false}}this.init=function(){n.initPixi();n.loadPixiSprites(k.pixiSprites)};function v(){m.rotation+=0.001;u=requestAnimationFrame(v)}if(k.interactive===true){var u,r,p;q.interactive=true;q.buttonMode=true;if(k.interactionEvent==="hover"||k.interactionEvent==="both"){q.pointerover=function(i){r=i.data.global.x;p=i.data.global.y;TweenMax.to(x.scale,1,{x:"+="+Math.sin(r)*100+"",y:"+="+Math.cos(p)*100+""});v()};q.pointerout=function(i){TweenMax.to(x.scale,1,{x:0,y:0});cancelAnimationFrame(u)}}if(k.interactionEvent==="click"||k.interactionEvent==="both"){q.pointerup=function(i){if(k.dispatchPointerOver===true){TweenMax.to(x.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(x.scale,1,{x:20,y:20})}})}else{TweenMax.to(x.scale,1,{x:0,y:0});cancelAnimationFrame(u)}};q.pointerdown=function(i){r=i.data.global.x;p=i.data.global.y;TweenMax.to(x.scale,1,{x:"+="+Math.sin(r)*1200+"",y:"+="+Math.cos(p)*200+""})};q.pointerout=function(i){if(k.dispatchPointerOver===true){TweenMax.to(x.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(x.scale,1,{x:20,y:20})}})}else{TweenMax.to(x.scale,1,{x:0,y:0});cancelAnimationFrame(u)}}}}if(k.displacementCenter===true){m.anchor.set(0.5);m.x=w.view.width/2;m.y=w.view.height/2}this.init();function s(G,E){var F,D,J,i;F=window.innerWidth/G.offsetWidth;D=window.innerHeight/G.offsetHeight;J=Math.min(F,D);G.style.transformOrigin="0 0";G.style.transform="scale("+J+")";if(G.offsetWidth>G.offsetHeight){if(G.offsetWidth*J<window.innerWidth){i="horizontally"}else{i="vertically"}}else{if(G.offsetHeight*J<window.innerHeight){i="vertically"}else{i="horizontally"}}var I;if(i==="horizontally"){I=(window.innerWidth-G.offsetWidth*J)/2;G.style.marginTop=0+"px";G.style.marginBottom=0+"px";G.style.marginLeft=I+"px";G.style.marginRight=I+"px"}if(i==="vertically"){I=(window.innerHeight-G.offsetHeight*J)/2;G.style.marginTop=I+"px";G.style.marginBottom=I+"px";G.style.marginLeft=0+"px";G.style.marginRight=0+"px"}G.style.paddingLeft=0+"px";G.style.paddingRight=0+"px";G.style.paddingTop=0+"px";G.style.paddingBottom=0+"px";G.style.display="block";document.body.style.backgroundColor=E;var H=navigator.userAgent.toLowerCase();if(H.indexOf("safari")!=-1){if(H.indexOf("chrome")>-1){}else{}}return J}};var e=document.querySelectorAll(".slide-item__image");var g=[];var d=[];for(var c=0;c<e.length;c++){var a=e[c];if(a.nextElementSibling){d.push(a.nextElementSibling.innerHTML)}else{d.push("")}g.push(a.getAttribute("src"))}var f=document.querySelector(".disortion-wrap").getAttribute("data-image");var b=new CanvasSlideshow({sprites:g,displacementImage:f,autoPlay:true,autoPlaySpeed:[0.1,0.1],centerSprites:true})})();