(function(){window.CanvasSlideshow=function(j){var m=this;j=j||{};j.stageWidth=j.hasOwnProperty("stageWidth")?j.stageWidth:1920;j.stageHeight=j.hasOwnProperty("stageHeight")?j.stageHeight:1080;j.pixiSprites=j.hasOwnProperty("sprites")?j.sprites:[];j.centerSprites=j.hasOwnProperty("centerSprites")?j.centerSprites:false;j.texts=j.hasOwnProperty("texts")?j.texts:[];j.autoPlay=j.hasOwnProperty("autoPlay")?j.autoPlay:true;j.autoPlaySpeed=j.hasOwnProperty("autoPlaySpeed")?j.autoPlaySpeed:[10,3];j.fullScreen=j.hasOwnProperty("fullScreen")?j.fullScreen:true;j.displaceScale=j.hasOwnProperty("displaceScale")?j.displaceScale:[200,70];j.displacementImage=j.hasOwnProperty("displacementImage")?j.displacementImage:"";j.navElement=j.hasOwnProperty("navElement")?j.navElement:document.querySelectorAll(".scene-nav");j.displaceAutoFit=j.hasOwnProperty("displaceAutoFit")?j.displaceAutoFit:false;j.wacky=j.hasOwnProperty("wacky")?j.wacky:false;j.interactive=j.hasOwnProperty("interactive")?j.interactive:false;j.interactionEvent=j.hasOwnProperty("interactionEvent")?j.interactionEvent:"";j.displaceScaleTo=(j.autoPlay===false)?[0,0]:[20,20];j.textColor=j.hasOwnProperty("textColor")?j.textColor:"#fff";j.displacementCenter=j.hasOwnProperty("displacementCenter")?j.displacementCenter:false;j.dispatchPointerOver=j.hasOwnProperty("dispatchPointerOver")?j.dispatchPointerOver:false;var v=new PIXI.autoDetectRenderer(j.stageWidth,j.stageHeight,{transparent:true});var z=new PIXI.Container();var p=new PIXI.Container();var l=new PIXI.Sprite.fromImage(j.displacementImage);var w=new PIXI.filters.DisplacementFilter(l);var y=new PIXI.TextStyle({fill:j.textColor,wordWrap:true,wordWrapWidth:400,letterSpacing:20,fontSize:14});this.currentIndex=0;this.initPixi=function(){document.body.appendChild(v.view);z.addChild(p);z.interactive=true;if(j.fullScreen===true){v.view.style.objectFit="cover";v.view.style.width="100%";v.view.style.height="100%";v.view.style.top="50%";v.view.style.left="50%";v.view.style.webkitTransform="translate( -50%, -50% ) scale(1.2)";v.view.style.transform="translate( -50%, -50% ) scale(1.2)"}else{v.view.style.maxWidth="100%";v.view.style.top="50%";v.view.style.left="50%";v.view.style.webkitTransform="translate( -50%, -50% )";v.view.style.transform="translate( -50%, -50% )"}l.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;z.filters=[w];if(j.autoPlay===false){w.scale.x=0;w.scale.y=0}if(j.wacky===true){l.anchor.set(0.5);l.x=v.width/2;l.y=v.height/2}l.scale.x=2;l.scale.y=2;w.autoFit=j.displaceAutoFit;z.addChild(l)};this.loadPixiSprites=function(I){var G=j.sprites;var C=j.texts;for(var D=0;D<G.length;D++){var F=new PIXI.Texture.fromImage(I[D]);var H=new PIXI.Sprite(F);if(C){var E=new PIXI.Text(C[D],y);H.addChild(E);E.anchor.set(0.5);E.x=H.width/2;E.y=H.height/2}if(j.centerSprites===true){H.anchor.set(0.5);H.x=v.width/2;H.y=v.height/2}if(D!==0){TweenMax.set(H,{alpha:0})}p.addChild(H)}};if(j.autoPlay===true){var A=new PIXI.ticker.Ticker();A.autoStart=j.autoPlay;A.add(function(i){l.x+=j.autoPlaySpeed[0]*i;l.y+=j.autoPlaySpeed[1];v.render(z)})}else{var B=new PIXI.ticker.Ticker();B.autoStart=true;B.add(function(i){v.render(z)})}var k=false;var s=p.children;this.moveSlider=function(i){k=true;var C=new TimelineMax({onComplete:function(){m.currentIndex=i;k=false;if(j.wacky===true){l.scale.set(1)}},onUpdate:function(){if(j.wacky===true){l.rotation+=C.progress()*0.02;l.scale.set(C.progress()*3)}}});C.clear();if(C.isActive()){return}C.to(w.scale,0.8,{x:j.displaceScale[0],y:j.displaceScale[1],ease:Power2.easeIn}).to(s[m.currentIndex],0.5,{alpha:0,ease:Power2.easeOut},0.4).to(s[i],0.8,{alpha:1,ease:Power2.easeOut},1).to(w.scale,0.7,{x:j.displaceScaleTo[0],y:j.displaceScaleTo[1],ease:Power1.easeOut},0.9)};var n=j.navElement;for(var x=0;x<n.length;x++){var h=n[x];h.onclick=function(i){if(k){return false}if(this.getAttribute("data-nav")==="next"){if(m.currentIndex>=0&&m.currentIndex<s.length-1){m.moveSlider(m.currentIndex+1)}else{m.moveSlider(0)}}else{if(m.currentIndex>0&&m.currentIndex<s.length){m.moveSlider(m.currentIndex-1)}else{m.moveSlider(e.length-1)}}return false}}this.init=function(){m.initPixi();m.loadPixiSprites(j.pixiSprites)};function u(){l.rotation+=0.001;t=requestAnimationFrame(u)}if(j.interactive===true){var t,q,o;p.interactive=true;p.buttonMode=true;if(j.interactionEvent==="hover"||j.interactionEvent==="both"){p.pointerover=function(i){q=i.data.global.x;o=i.data.global.y;TweenMax.to(w.scale,1,{x:"+="+Math.sin(q)*100+"",y:"+="+Math.cos(o)*100+""});u()};p.pointerout=function(i){TweenMax.to(w.scale,1,{x:0,y:0});cancelAnimationFrame(t)}}if(j.interactionEvent==="click"||j.interactionEvent==="both"){p.pointerup=function(i){if(j.dispatchPointerOver===true){TweenMax.to(w.scale,1,{x:0,y:0,onComplete:function(){TweenMax.to(w.scale,1,{x:20,y:20})}})}else{TweenMax.to(w.scale,1,{x:0,y:0});cancelAnimationFrame(t)}};p.pointerdown=function(i){q=i.data.global.x;o=i.data.global.y;TweenMax.to(w.scale,1,{x:"+="+Math.sin(q)*1200+"",y:"+="+Math.cos(o)*200+""})}}}if(j.displacementCenter===true){l.anchor.set(0.5);l.x=v.view.width/2;l.y=v.view.height/2}this.init();function r(F,D){var E,C,I,i;E=window.innerWidth/F.offsetWidth;C=window.innerHeight/F.offsetHeight;I=Math.min(E,C);F.style.transformOrigin="0 0";F.style.transform="scale("+I+")";if(F.offsetWidth>F.offsetHeight){if(F.offsetWidth*I<window.innerWidth){i="horizontally"}else{i="vertically"}}else{if(F.offsetHeight*I<window.innerHeight){i="vertically"}else{i="horizontally"}}var H;if(i==="horizontally"){H=(window.innerWidth-F.offsetWidth*I)/2;F.style.marginTop=0+"px";F.style.marginBottom=0+"px";F.style.marginLeft=H+"px";F.style.marginRight=H+"px"}if(i==="vertically"){H=(window.innerHeight-F.offsetHeight*I)/2;F.style.marginTop=H+"px";F.style.marginBottom=H+"px";F.style.marginLeft=0+"px";F.style.marginRight=0+"px"}F.style.paddingLeft=0+"px";F.style.paddingRight=0+"px";F.style.paddingTop=0+"px";F.style.paddingBottom=0+"px";F.style.display="block";document.body.style.backgroundColor=D;var G=navigator.userAgent.toLowerCase();if(G.indexOf("safari")!=-1){if(G.indexOf("chrome")>-1){}else{}}return I}};var e=document.querySelectorAll(".slide-item__image");var g=[];var d=[];for(var c=0;c<e.length;c++){var a=e[c];if(a.nextElementSibling){d.push(a.nextElementSibling.innerHTML)}else{d.push("")}g.push(a.getAttribute("src"))}var f=document.querySelector(".disortion-wrap").getAttribute("data-image");var b=new CanvasSlideshow({sprites:g,displacementImage:f,autoPlay:true,autoPlaySpeed:[4,3],displaceScale:[5000,10000],interactive:true,centerSprites:true,interactionEvent:"click",displaceAutoFit:false,dispatchPointerOver:true})})();