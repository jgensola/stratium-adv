(function(a){vc.TemplateWindowUIPanelBackendEditor=vc.TemplatesPanelViewBackend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,initialize:function(){vc.TemplateWindowUIPanelBackendEditor.__super__.initialize.call(this),this.trigger("show",this.initTemplatesTabs,this)},show:function(){this.clearSearch(),vc.TemplateWindowUIPanelBackendEditor.__super__.show.call(this),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates ul > li').each(function(){"all"==a(this).attr("data-sort")?a(this).find(".count").html(a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template').length):a(this).find(".count").html(a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template.'+a(this).attr("data-sort")).length)}),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li[data-sort="all"]').addClass("active").trigger("click"),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li').click(function(){a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li').removeClass("active"),a(this).addClass("active");var b=a(this).attr("data-sort");a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template').removeClass("hidden"),"all"!=b&&a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template:not(.'+b+")").addClass("hidden")}),a(".vc_ui-template",a(this.el)).removeClass("is-loading").find(".vc-composer-icon").removeClass("vc-c-icon-sync").addClass("vc-c-icon-add");a(".vc_ui-control-button i",a(this.el)).removeClass("rotating");a(this.el).on("click",".vc_ui-template [data-template-handler]",function(){a(this).closest(".vc_ui-template").addClass("is-loading");if(a(this).is(".vc_ui-control-button")){a(this).find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync rotating")}else{a(this).next(".vc_ui-list-bar-item-actions").find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync rotating")}})},initTemplatesTabs:function(){this.$el.find('[data-vc-ui-element="panel-tabs-controls"]').vcTabsLine("moveTabs")},showMessage:function(f,c){var b;if(this.showMessageDisabled){return !1}b="vc_col-xs-12 wpb_element_wrapper",this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var e,d=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(c){case"error":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"danger",icon:"times",text:f}));break;case"warning":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"warning",icon:"exclamation-triangle",text:f}));break;case"success":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"success",icon:"check",text:f}))}e.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),e.fadeIn(),this.message_box_timeout=window.setTimeout(function(){e.remove()},6000)},changeTab:function(c){c.preventDefault(),c&&!c.isClearSearch&&this.clearSearch();var b=a(c.currentTarget);b.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),b.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(b.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))},setPreviewFrameHeight:function(c,b){parseInt(b)<100&&(b=100),a('data-vc-template-preview-frame="'+c+'"').height(b)}}),vc.TemplateWindowUIPanelBackendEditor.prototype.events=a.extend(!0,vc.TemplateWindowUIPanelBackendEditor.prototype.events,{'click [data-vc-ui-element="button-save"]':"save",'click [data-vc-ui-element="button-close"]':"hide",'click [data-vc-ui-element="button-minimize"]':"toggleOpacity","keyup [data-vc-templates-name-filter]":"searchTemplate","search [data-vc-templates-name-filter]":"searchTemplate","click .vc_template-save-btn":"saveTemplate","click [data-template_id] [data-template-handler]":"loadTemplate",'click [data-vc-container=".vc_ui-list-bar"][data-vc-preview-handler]':"buildTemplatePreview",'click [data-vc-ui-delete="template-title"]':"removeTemplate",'click [data-vc-ui-element="panel-tab-control"]':"changeTab"}),vc.TemplateWindowUIPanelFrontendEditor=vc.TemplatesPanelViewFrontend.vcExtendUI(vc.HelperPanelViewHeaderFooter).vcExtendUI(vc.HelperTemplatesPanelViewSearch).extend({panelName:"template_window",showMessageDisabled:!1,show:function(){this.clearSearch(),vc.TemplateWindowUIPanelFrontendEditor.__super__.show.call(this),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates ul > li').each(function(){"all"==a(this).attr("data-sort")?a(this).find(".count").html(a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template').length):a(this).find(".count").html(a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template.'+a(this).attr("data-sort")).length)}),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li[data-sort="all"]').addClass("active").trigger("click"),a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li').click(function(){a('.vc_edit-form-tab[data-tab="pao_templates"] .sortable_templates li').removeClass("active"),a(this).addClass("active");var b=a(this).attr("data-sort");a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template').removeClass("hidden"),"all"!=b&&a('.vc_edit-form-tab[data-tab="pao_templates"] .vc_ui-template-list > .vc_ui-template:not(.'+b+")").addClass("hidden")}),a(".vc_ui-template",a(this.el)).removeClass("is-loading").find(".vc-composer-icon").removeClass("vc-c-icon-sync").addClass("vc-c-icon-add");a(".vc_ui-control-button i",a(this.el)).removeClass("rotating");a(this.el).on("click",".vc_ui-template [data-template-handler]",function(){a(this).closest(".vc_ui-template").addClass("is-loading");if(a(this).is(".vc_ui-control-button")){a(this).find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync rotating")}else{a(this).next(".vc_ui-list-bar-item-actions").find(".vc-composer-icon").removeClass("vc-c-icon-add").addClass("vc-c-icon-sync rotating")}})},showMessage:function(f,c){if(this.showMessageDisabled){return !1}this.message_box_timeout&&this.$el.find("[data-vc-panel-message]").remove()&&window.clearTimeout(this.message_box_timeout),this.message_box_timeout=!1;var e,b,d=vc.template('<div class="vc_message_box vc_message_box-standard vc_message_box-rounded vc_color-<%- color %>"><div class="vc_message_box-icon"><i class="fa fa fa-<%- icon %>"></i></div><p><%- text %></p></div>');switch(b="vc_col-xs-12 wpb_element_wrapper",c){case"error":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"danger",icon:"times",text:f}));break;case"warning":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"warning",icon:"exclamation-triangle",text:f}));break;case"success":e=a('<div class="'+b+'" data-vc-panel-message>').html(d({color:"success",icon:"check",text:f}))}e.prependTo(this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_row.vc_active')),e.fadeIn(),this.message_box_timeout=window.setTimeout(function(){e.remove()},6000)},changeTab:function(c){c.preventDefault(),c&&!c.isClearSearch&&this.clearSearch();var b=a(c.currentTarget);b.parent().hasClass("vc_active")||(this.$el.find('[data-vc-ui-element="panel-tabs-controls"] .vc_active:not([data-vc-ui-element="panel-tabs-line-dropdown"])').removeClass("vc_active"),b.parent().addClass("vc_active"),this.$el.find('[data-vc-ui-element="panel-edit-element-tab"].vc_active').removeClass("vc_active"),this.$el.find(b.data("vcUiElementTarget")).addClass("vc_active"),this.$tabsMenu&&this.$tabsMenu.vcTabsLine("checkDropdownContainerActive"))}})})(jQuery);