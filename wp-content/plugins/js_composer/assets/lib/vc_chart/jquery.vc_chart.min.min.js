!function(b){function a(d,c){this.el=d,this.$el=b(this.el),this.options=b.extend({color:"#f7f7f7",units:"",label_selector:".vc_pie_chart_value",back_selector:".vc_pie_chart_back",responsive:!0},c),this.init()}a.prototype={constructor:a,_progress_v:0,animated:!1,init:function(){this.color=this.options.color,this.value=this.$el.data("pie-value")/100,this.label_value=this.$el.data("pie-label-value")||this.$el.data("pie-value"),this.$wrapper=b(".vc_pie_wrapper",this.$el),this.$label=b(this.options.label_selector,this.$el),this.$back=b(this.options.back_selector,this.$el),this.$canvas=this.$el.find("canvas"),this.draw(),this.setWayPoint(),!0===this.options.responsive&&this.setResponsive()},setResponsive:function(){var c=this;b(window).resize(function(){c.$el&&c.$el.is(":visible")&&(!0===c.animated&&c.circle.stop(),c.draw(!0))})},draw:function(e){var c,d=this.$el.addClass("vc_ready").width();d||(d=this.$el.parents(":visible").first().width()-2),c=(d=d/100*80)/2-5-1,this.$wrapper.css({width:d+"px"}),this.$label.css({width:d,height:d,"line-height":d+"px"}),this.$back.css({width:d,height:d}),this.$canvas.attr({width:d+"px",height:d+"px"}),this.$el.addClass("vc_ready"),this.circle=new ProgressCircle({canvas:this.$canvas.get(0),minRadius:c,arcWidth:5}),!0===e&&!0===this.animated&&(this._progress_v=this.value,this.circle.addEntry({fillColor:this.color,progressListener:b.proxy(this.setProgress,this)}).start())},setProgress:function(){if(this._progress_v>=this.value){return this.circle.stop(),this.$label.text(this.label_value+this.options.units),this._progress_v}this._progress_v+=0.005;var c=this._progress_v/this.value*this.label_value,d=Math.round(c)+this.options.units;return this.$label.text(d),this._progress_v},animate:function(){!0!==this.animated&&(this.animated=!0,this.circle.addEntry({fillColor:this.color,progressListener:b.proxy(this.setProgress,this)}).start(5))},setWayPoint:function(){void 0!==b.fn.waypoint?this.$el.waypoint(b.proxy(this.animate,this),{offset:"85%"}):this.animate()}},b.fn.vcChat=function(c,d){return this.each(function(){var g=b(this),f=g.data("vc_chart"),e="object"==typeof c?c:{color:g.data("pie-color"),units:g.data("pie-units")};void 0===c&&g.data("vc_chart",f=new a(this,e)),"string"==typeof c&&f[c](d)})},"function"!=typeof window.vc_pieChart&&(window.vc_pieChart=function(){b(".vc_pie_chart:visible").vcChat()}),b(document).ready(function(){!window.vc_iframe&&vc_pieChart()})}(window.jQuery);