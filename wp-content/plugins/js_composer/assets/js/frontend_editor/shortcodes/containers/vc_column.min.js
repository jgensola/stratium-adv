(function(a){window.InlineShortcodeView_vc_column=window.InlineShortcodeViewContainerWithParent.extend({controls_selector:"#vc_controls-template-vc_column",resizeDomainName:"columnSize",_x:0,css_width:12,prepend:false,initialize:function(b){window.InlineShortcodeView_vc_column.__super__.initialize.call(this,b);_.bindAll(this,"startChangeSize","stopChangeSize","resize")},render:function(){var b;window.InlineShortcodeView_vc_column.__super__.render.call(this);this.prepend=false;a('<div class="vc_resize-bar"></div>').appendTo(this.$el).mousedown(this.startChangeSize);this.setColumnClasses();this.customCssClassReplace();return this},destroy:function(c){var b=this.model.get("parent_id");window.InlineShortcodeView_vc_column.__super__.destroy.call(this,c);if(!vc.shortcodes.where({parent_id:b}).length){vc.shortcodes.get(b).destroy()}},customCssClassReplace:function(){var d,c,b;d=this.$el.find(".wpb_column").attr("class");c=/.*(vc_custom_\d+).*/;b=d&&d.match?d.match(c):false;if(b&&b[1]){this.$el.addClass(b[1]);this.$el.find(".wpb_column").attr("class",d.replace(b[1],"").trim())}},setColumnClasses:function(){var d,c,b;d=this.getParam("offset")||"";c=this.getParam("width")||"1/1";b=this.$el.find("> .wpb_column");this.css_class_width=this.convertSize(c);if(this.css_class_width!==c){this.css_class_width=this.css_class_width.replace(/[^\d]/g,"")}b.removeClass("vc_col-sm-"+this.css_class_width);if(!d.match(/vc_col\-sm\-\d+/)){this.$el.addClass("vc_col-sm-"+this.css_class_width)}if(vc.responsive_disabled){d=d.replace(/vc_col\-(lg|md|xs)[^\s]*/g,"")}if(!_.isEmpty(d)){b.removeClass(d);this.$el.addClass(d)}},startChangeSize:function(c){var b=this.getParam(b)||12;this._grid_step=this.parent_view.$el.width()/b;vc.frame_window.jQuery("body").addClass("vc_column-dragging").disableSelection();this._x=parseInt(c.pageX);vc.$page.bind("mousemove."+this.resizeDomainName,this.resize);a(vc.frame_window.document).mouseup(this.stopChangeSize)},stopChangeSize:function(){this._x=0;vc.frame_window.jQuery("body").removeClass("vc_column-dragging").enableSelection();vc.$page.unbind("mousemove."+this.resizeDomainName)},resize:function(f){var c,b,d,g=this.model.get("params");d=f.pageX-this._x;if(Math.abs(d)<this._grid_step){return}this._x=parseInt(f.pageX);b=""+this.css_class_width;if(0<d){this.css_class_width+=1}else{if(0>d){this.css_class_width-=1}}if(12<this.css_class_width){this.css_class_width=12}if(1>this.css_class_width){this.css_class_width=1}g.width=vc.getColumnSize(this.css_class_width);this.model.save({params:g},{silent:true});this.$el.removeClass("vc_col-sm-"+b).addClass("vc_col-sm-"+this.css_class_width)},convertSize:function(f){var g,b,d,e,c;g="vc_col-sm-";b=f?f.split("/"):[1,1];d=_.range(1,13);e=!_.isUndefined(b[0])&&0<=_.indexOf(d,parseInt(b[0],10))?parseInt(b[0],10):false;c=!_.isUndefined(b[1])&&0<=_.indexOf(d,parseInt(b[1],10))?parseInt(b[1],10):false;if("5"===b[1]){return f}if(false!==e&&false!==c){return g+(12*e/c)}return g+"12"},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_column")}})})(window.jQuery);