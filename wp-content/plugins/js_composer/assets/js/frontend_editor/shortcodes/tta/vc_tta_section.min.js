(function(a){vc.ttaSectionActivateOnClone=false;window.InlineShortcodeView_vc_tta_section=window.InlineShortcodeViewContainerWithParent.extend({events:{'click > .vc_controls [data-vc-control="destroy"]':"destroy",'click > .vc_controls [data-vc-control="edit"]':"edit",'click > .vc_controls [data-vc-control="clone"]':"clone",'click > .vc_controls [data-vc-control="prepend"]':"prependElement",'click > .vc_controls [data-vc-control="append"]':"appendElement",'click > .vc_controls [data-vc-control="parent.destroy"]':"destroyParent",'click > .vc_controls [data-vc-control="parent.edit"]':"editParent",'click > .vc_controls [data-vc-control="parent.clone"]':"cloneParent",'click > .vc_controls [data-vc-control="parent.append"]':"addSibling","click .vc_tta-panel-body > [data-js-panel-body].vc_empty-element":"appendElement","click > .vc_controls .vc_control-btn-switcher":"switchControls",mouseenter:"resetActive",mouseleave:"holdActive"},controls_selector:"#vc_controls-template-vc_tta_section",previousClasses:false,activeClass:"vc_active",render:function(){var b=this.model;window.InlineShortcodeView_vc_tta_section.__super__.render.call(this);_.bindAll(this,"bindAccordionEvents");this.refreshContent();this.moveClasses();_.defer(this.bindAccordionEvents);if(this.isAsActiveSection()){window.vc.frame_window.vc_iframe.addActivity(function(){var c=window.vc.frame_window.jQuery('[data-vc-accordion][data-vc-target="[data-model-id='+b.get("id")+']"]');c.trigger("click")})}return this},allowAddControl:function(){return vc_user_access().shortcodeAll("vc_tta_section")},clone:function(b){vc.ttaSectionActivateOnClone=true;window.InlineShortcodeView_vc_tta_section.__super__.clone.call(this,b)},addSibling:function(b){window.InlineShortcodeView_vc_tta_section.__super__.addSibling.call(this,b)},parentChanged:function(){window.InlineShortcodeView_vc_tta_section.__super__.parentChanged.call(this);this.refreshContent(true);return this},changed:function(){if(this.allowAddControlOnEmpty()&&0===this.$el.find(".vc_element[data-tag]").length){this.$el.addClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body]").addClass("vc_empty-element")}else{this.$el.removeClass("vc_empty").find(".vc_tta-panel-body > [data-js-panel-body].vc_empty-element").removeClass("vc_empty-element")}},moveClasses:function(){var b;if(this.previousClasses){this.$el.get(0).className=this.$el.get(0).className.replace(this.previousClasses,"")}b=this.$el.find(".vc_tta-panel").get(0).className;this.$el.attr("data-vc-content",this.$el.find(".vc_tta-panel").data("vcContent"));this.previousClasses=b;this.$el.find(".vc_tta-panel").get(0).className="";this.$el.get(0).className=this.$el.get(0).className+" "+this.previousClasses;this.$el.find(".vc_tta-panel-title [data-vc-target]").attr("data-vc-target","[data-model-id="+this.model.get("id")+"]")},refreshContent:function(b){var e,h,d,c,f,g;d=vc.shortcodes.get(this.model.get("parent_id"));if(_.isObject(d)){f=vc.getDefaultsAndDependencyMap(d.get("shortcode"));c=_.extend({},f.defaults,d.get("params"));e=this.$el.find(".vc_tta-controls-icon");if(c&&!_.isUndefined(c.c_icon)&&0<c.c_icon.length){if(e.length){e.attr("data-vc-tta-controls-icon",c.c_icon)}else{this.$el.find("[data-vc-tta-controls-icon-wrapper]").append(a('<i class="vc_tta-controls-icon" data-vc-tta-controls-icon="'+c.c_icon+'"></i>'))}if(!_.isUndefined(c.c_position)&&0<c.c_position.length){h=this.$el.find("[data-vc-tta-controls-icon-position]");if(h.length){h.attr("data-vc-tta-controls-icon-position",c.c_position)}}}else{e.remove();this.$el.find("[data-vc-tta-controls-icon-position]").attr("data-vc-tta-controls-icon-position","")}if(true!==b&&d.view&&d.view.sectionUpdated){d.view.sectionUpdated(this.model)}}},setAsActiveSection:function(b){this.model.set("isActiveSection",!!b)},isAsActiveSection:function(){return !!this.model.get("isActiveSection")},bindAccordionEvents:function(){var b=this;window.vc.frame_window.jQuery('[data-vc-target="[data-model-id='+this.model.get("id")+']"]').on("show.vc.accordion hide.vc.accordion",function(c){b.setAsActiveSection("show"===c.type)})},destroy:function(c){var b,d;d=this.model.get("parent_id");window.InlineShortcodeView_vc_tta_section.__super__.destroy.call(this,c);b=vc.shortcodes.get(d);if(!vc.shortcodes.where({parent_id:d}).length){b.destroy()}else{b.view&&b.view.removeSection&&b.view.removeSection(this.model.get("id"))}}})})(window.jQuery);