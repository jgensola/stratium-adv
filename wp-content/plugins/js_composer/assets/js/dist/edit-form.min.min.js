if(_.isUndefined(window.vc)){var vc={atts:{}}}if(function(b){var a=Backbone.View.extend({events:{},$lg_offset_placeholder_value:!1,$lg_size_placeholder_value:!1,initialize:function(){_.bindAll(this,"setLgPlaceholders")},render:function(){return this},save:function(){var c=[];return this.$el.find(".vc_column_offset_field").each(function(){var d=b(this);d.is(":checkbox:checked")?c.push(d.attr("name")):d.is("select")&&""!==d.val()&&c.push(d.val())}),c},setLgPlaceholders:function(){var c=this.$lg_offset_placeholder_value.val().replace(/[^\d]/g,"");this.$lg_size.find("option:first").text(VcI8nColumnOffsetParam.inherit_default),this.$lg_offset.find("option:first").text(c?VcI8nColumnOffsetParam.inherit+c:"")}});vc.atts.column_offset={parse:function(c){return this.content().find("input.wpb_vc_param_value."+c.param_name).data("vcColumnOffset").save().join(" ")},init:function(d,c){b('[data-column-offset="true"]',c).each(function(){var e=b(this);e.find(".wpb_vc_param_value").data("vcColumnOffset",new a({el:e}).render())})}}}(window.jQuery),_.isUndefined(window.vc)){vc={atts:{}}}if(function(c){var a,d=wp.media,b=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");d.controller.VcCssSingleImage=d.controller.VcSingleImage.extend({setCssEditor:function(e){return e&&(this._css_editor=e),this},updateSelection:function(){var e,g=this.get("selection"),f=this._css_editor.getBackgroundImage();void 0!==f&&""!==f&&-1!==f&&(e=_.map(f.toString().split(/,/),function(i){var h=wp.media.model.Attachment.get(i);return h.fetch(),h})),g.reset(e)}}),a=vc.CssEditor=Backbone.View.extend({attrs:{},layouts:["margin","border-width","padding"],positions:["top","right","bottom","left"],$field:!1,simplify:!1,$simplify:!1,events:{"click .vc_icon-remove":"removeImage","click .vc_add-image":"addBackgroundImage","change .vc_simplify":"changeSimplify"},initialize:function(){_.bindAll(this,"setSimplify")},render:function(e){return this.attrs={},this.$simplify=this.$el.find(".vc_simplify"),_.isString(e)&&this.parse(e),this},parse:function(f){var e=f.split(/\s*(\.[^\{]+)\s*\{\s*([^\}]+)\s*\}\s*/g);e[2]&&this.parseAtts(e[2].replace(/\s+!important/g,""))},addBackgroundImage:function(f){if(f.preventDefault(),window.vc_selectedFilters={},this.image_media){return this.image_media.open("vc_editor")}this.image_media=d({state:"vc_single-image",states:[(new d.controller.VcCssSingleImage).setCssEditor(this)]}),this.image_media.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:window.i18nLocale.set_image})},this.image_media),this.image_media.state("vc_single-image").on("select",this.setBgImage),this.image_media.open("vc_editor")},setBgImage:function(){!function(f,g){var e;e=[],c(".media-modal").addClass("processing-media"),f.each(function(h){e.push(h.get("id"))}),function(h,i){c.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:h,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(k){var j,n,m,l;if("function"==typeof i){for(j=[],m=[],l=0;l<k.data.ids.length;l++){n=wp.media.model.Attachment.get(k.data.ids[l]),m.push(n.fetch()),j.push(n)}c.when.apply(c,m).done(function(){i(j)})}}).fail(function(j){c(".media-modal-close").click(),window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(j)}).always(function(){c(".media-modal").removeClass("processing-media")})}(e,function(k){if(!window.vc||!window.vc.active_panel){return !1}var h,j;h=_.map(k,function(l){return l.attributes}),f.reset(h),j=_.map(f.models,function(l){return l.attributes});var i=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom));g._css_editor.$el.find(".vc_background-image .vc_image").html(i(j[0])),c(".media-modal").removeClass("processing-media")})}(this.get("selection"),this)},setCurrentBgImage:function(h){var e,g,i=/([^\?]+)(\?id=\d+){0,1}/,f="",j="";h.match(/^\d+$/)?(g=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(g({url:b,id:h,css_class:"vc_preview"})),c.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:h,size:"full",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(k){this.$el.find(".vc_ce-image").attr("src",k+"?id="+h).removeClass("vc_preview")})):h.match(i)&&(f=(e=h.split(i))[1],e[2]&&(j=e[2].replace(/[^\d]+/,"")),g=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(g({url:f,id:j})))},changeSimplify:function(){var e=_.debounce(this.setSimplify,100);e&&e()},setSimplify:function(){this.simplifiedMode(this.$simplify[0].checked)},simplifiedMode:function(e){e?(this.simplify=!0,this.$el.addClass("vc_simplified")):(this.simplify=!1,this.$el.removeClass("vc_simplified"),_.each(this.layouts,function(f){"border-width"===f&&(f="border");var g=c("[data-attribute="+f+"].vc_top");this.$el.find("[data-attribute="+f+"]:not(.vc_top)").val(g.val())},this))},removeImage:function(g){var f=c(g.currentTarget);g.preventDefault(),f.parent().remove()},getBackgroundImage:function(){return this.$el.find(".vc_ce-image").data("imageId")},parseAtts:function(f){var g,e,h;g=/(\d+\S*)\s+(\w+)\s+([\d\w#\(,]+)/,h=!(e=/^([^\s]+)\s+url\(([^\)]+)\)([\d\w]+\s+[\d\w]+)?$/),_.map(f.split(";"),function(o){var n,j,i,l=o.split(/:\s/),m=l[1]||"",k=l[0]||"";m&&(m=m.trim()),k.match(new RegExp("^("+this.layouts.join("|").replace("-","\\-")+")$"))&&m?(1===(n=m.split(/\s+/g)).length?n=[n[0],n[0],n[0],n[0]]:2===n.length?(n[2]=n[0],n[3]=n[1]):3===n.length&&(n[3]=n[1]),_.each(this.positions,function(q,p){this.$el.find("[data-name="+k+"-"+q+"]").val(n[p])},this)):"background-size"===k?(h=m,this.$el.find("[name=background_style]").val(m)):"background-repeat"!==k||h?"background-image"===k?this.setCurrentBgImage(m.replace(/url\(([^\)]+)\)/,"$1")):"background"===k&&m?((i=m.split(e))[1]&&this.$el.find("[name="+k+"_color]").val(i[1]),i[2]&&this.setCurrentBgImage(i[2])):"border"===k&&m&&m.match(g)?(j=m.split(g),n=[j[1],j[1],j[1],j[1]],_.each(this.positions,function(q,p){this.$el.find("[name="+k+"_"+q+"_width]").val(n[p])},this),this.$el.find("[name=border_style]").val(j[2]),this.$el.find("[name=border_color]").val(j[3]).trigger("change")):-1!=k.indexOf("border")&&m?-1!=k.indexOf("style")?this.$el.find("[name=border_style]").val(m):-1!=k.indexOf("color")?this.$el.find("[name=border_color]").val(m).trigger("change"):-1!=k.indexOf("radius")?this.$el.find("[name=border_radius]").val(m):k.match(/^[\w\-\d]+$/)&&this.$el.find("[name="+k.replace(/\-+/g,"_")+"]").val(m):k.match(/^[\w\-\d]+$/)&&m&&this.$el.find("[name="+k.replace(/\-+/g,"_")+"]").val(m):this.$el.find("[name=background_style]").val(m)},this)},save:function(){var e="";return this.attrs={},_.each(this.layouts,function(f){this.getFields(f)},this),this.getBackground(),this.getBorder(),_.isEmpty(this.attrs)||(e=".vc_custom_"+Date.now()+"{"+_.reduce(this.attrs,function(f,h,g){return h?f+g+": "+h+" !important;":f},"",this)+"}"),e&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(e),e},getBackgroundImageSrc:function(){return this.$el.find(".vc_background-image img").attr("src")},getBackgroundColor:function(){return this.$el.find("[name=background_color]").val()},getBackgroundStyle:function(){return this.$el.find("[name=background_style]").val()},getBackground:function(){var e=this.getBackgroundColor(),g=this.getBackgroundImageSrc(),f=this.getBackgroundStyle();e&&g?this.attrs.background=e+" url("+g+")":e?this.attrs["background-color"]=e:g&&(this.attrs["background-image"]="url("+g+")"),f.match(/repeat/)?(this.attrs["background-position"]="0 0",this.attrs["background-repeat"]=f):f.match(/cover|contain/)&&(this.attrs["background-position"]="center",this.attrs["background-repeat"]="no-repeat",this.attrs["background-size"]=f),e.match(/^rgba/)&&(this.attrs["*background-color"]=e.replace(/\s+/,"").replace(/(rgb)a\((\d+)\,(\d+),(\d+),[^\)]+\)/,"$1($2,$3,$4)"))},getBorder:function(){var g=this.$el.find("[name=border_style]").val(),e=this.$el.find("[name=border_radius]").val(),f=this.$el.find("[name=border_color]").val();this.attrs["border-width"]&&this.attrs["border-width"].match(/^\d+\S+$/)?(this.attrs.border=this.attrs["border-width"]+" "+(g||"initial")+" "+f,this.attrs["border-width"]=void 0):_.each(["left","right","top","bottom"],function(h){this.attrs["border-"+h+"-width"]&&(f&&(this.attrs["border-"+h+"-color"]=f),g&&(this.attrs["border-"+h+"-style"]=g))},this),e&&(this.attrs["border-radius"]=e)},getFields:function(e){var f=[];if(this.simplify){return this.getSimplifiedField(e)}_.each(this.positions,function(h){var g=this.$el.find("[data-name="+e+"-"+h+"]").val().replace(/\s+/,"");g.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(g=isNaN(parseFloat(g))?"":parseFloat(g)+"px"),g.length&&f.push({name:h,val:g})},this),_.each(f,function(g){var h="border-width"===e?"border-"+g.name+"-width":e+"-"+g.name;this.attrs[h]=g.val},this)},getSimplifiedField:function(e){var f=this.$el.find("[data-name="+e+"-top]").val().replace(/\s+/,"");f.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(f=isNaN(parseFloat(f))?"":parseFloat(f)+"px"),f.length&&(this.attrs[e]=f)}}),vc.atts.css_editor={parse:function(e){return this.content().find('input.wpb_vc_param_value[name="'+e.param_name+'"]').data("vcFieldManager").save()},init:function(f,e){c("[data-css-editor=true]",this.content()).each(function(){var i=c(this),g=i.find('input.wpb_vc_param_value[name="'+f.param_name+'"]'),h=g.val();h||(h=function(){var k=vc.edit_element_block_view.model.get("params"),j=_.reduce({bg_color:"background-color",padding:"padding",margin_bottom:"margin-bottom",bg_image:"background-image"},function(m,l,o){var n=k[o];return _.isUndefined(n)||!n.length?m:("bg_image"===o&&(n="url("+n+")"),m+l+": "+n+";")},"",this);return j?".tmp_class{"+j+"}":""}()),g.data("vcFieldManager",new a({el:i}).render(h))}),vc.atts.colorpicker.init.call(this,f,e)}}}(window.jQuery),_.isUndefined(window.vc)){vc={atts:{}}}if(function(b){var a=Backbone.View.extend({events:{change:"setParams"},setParams:function(){var e,g=this.save(),f=this.$el.find('[value="'+g+'"]'),h=vc.edit_element_block_view.content(),d=this.$el;if(f.length){e=f.data("params");var c=[];_.each(e,function(m,i,l){var k,j=h.find("[name="+i+"].wpb_vc_param_value");j.length&&(j.unbind("change.vcParamsPreset"),(k=j.data("vcFieldManager"))&&k.render&&k.render(m),c.push(j),j.val(m).trigger("change"))}),_.each(c,function(j,i){j.bind("change.vcParamsPreset",function(k){_.isUndefined(k.extra_type)&&d.val("")})})}},render:function(){return this.setParams(),this},save:function(){return this.$el.val()}});vc.atts.params_preset={parse:function(c){return b("select[name="+c.param_name+"]",this.content()).val()},init:function(d,c){b(".vc_params-preset-select",c).each(function(){var e=b(this);_.isUndefined(e.data("fieldManager"))&&e.data("fieldManager",new a({el:e}).render())})}}}(window.jQuery),function(b){new function(){b(".gallery_widget_attached_images_list",this.$view).unbind("click.removeImage").on("click.removeImage","a.vc_icon-remove",function(d){d.preventDefault();var c=b(this).closest(".edit_form_line");b(this).parent().remove();var f=[];c.find(".added img").each(function(){f.push(b(this).attr("rel"))}),c.find(".gallery_widget_attached_images_ids").val(f.join(",")).trigger("change")}),b(".gallery_widget_attached_images_list").each(function(d){var c=b(this);c.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var e=[];b(this).find(".added img").each(function(){e.push(b(this).attr("rel"))}),c.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(e.join(",")).trigger("change")}})})};var a=b("#vc_edit-form-tabs");a.length&&(b(".wpb-edit-form").addClass("vc_with-tabs"),a.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),a.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),a.find(".vc_edit-form-link").click(function(d){var c=b(this);d.preventDefault(),a.find(".vc_active").removeClass("vc_active"),c.parent().addClass("vc_active"),b(c.attr("href")).addClass("vc_active").parents(".vc_panel-body").scrollTop(0)}))}(window.jQuery),_.isUndefined(window.vc)){vc={atts:{}}}!function(a){vc.atts.vc_grid_item={init:function(c,b){!0===vc_user_access().getState("grid_builder")||null===vc_user_access().getState("grid_builder")?this.content().find('[data-vc-shortcode-param-name="'+c.param_name+'"] [data-vc-grid-element="value"]').change(function(){var e=a(this).val(),d=a(this).find("[value="+e+"]").data("vcLink");e&&a(this).parents('[data-vc-shortcode-param-name="'+c.param_name+'"]:first').find('[data-vc-grid-item="edit_link"]').attr("href",d)}).trigger("change"):this.content().find('[data-vc-shortcode-param-name="'+c.param_name+'"] .vc_description').remove()},parse:function(c){var b=this.content().find('[data-vc-shortcode-param-name="'+c.param_name+'"] [data-vc-grid-element="value"]');return b.length?b.val():""}}}(window.jQuery);