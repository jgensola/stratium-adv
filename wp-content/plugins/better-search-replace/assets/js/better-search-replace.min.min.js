!function(d){function g(e,a,h,j){d.ajax({type:"POST",url:bsr_object_vars.endpoint+e,data:{bsr_ajax_nonce:bsr_object_vars.ajax_nonce,action:e,bsr_step:a,bsr_page:h,bsr_data:j},dataType:"json",success:function(k){void 0!==k.message&&(d(".bsr-description").remove(),d(".bsr-progress-wrap").append('<p class="description bsr-description">'+k.message+"</p>")),"done"==k.step?(b("100%"),void 0!==k.next_action?(b("0%",0),g(k.next_action,0,0,k.bsr_data)):(d(".bsr-processing-wrap").remove(),d(".bsr-disabled").removeClass("bsr-disabled button-disabled"),window.location=k.url)):(b(k.percentage),g(e,k.step,k.page,k.bsr_data))}}).fail(function(i){d(".bsr-processing-wrap").remove(),d(".bsr-disabled").removeClass("bsr-disabled button-disabled"),d("#bsr-error-wrap").html('<div class="error"><p>'+bsr_object_vars.unknown+"</p></div>"),window.console&&window.console.log&&console.log(i)})}function f(){var h=d("#bsr-submit"),e=d("#bsr-error-wrap");h.click(function(a){if(a.preventDefault(),!h.hasClass("button-disabled")){if(d("#search_for").val()){if(d("#bsr-table-select").val()){var j=d(".bsr-action-form").serialize().replace(/%5C/g,"#BSR_BACKSLASH#");e.html(""),h.addClass("bsr-disabled button-disabled"),d("#bsr-submit-wrap").append('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>'),d(".bsr-progress-wrap").append('<p class="description bsr-description">'+bsr_object_vars.processing+"</p>"),g("process_search_replace",0,0,j)}else{e.html('<div class="error"><p>'+bsr_object_vars.no_tables+"</p></div>")}}else{e.html('<div class="error"><p>'+bsr_object_vars.no_search+"</p></div>")}}})}function b(h,a){void 0===a&&(a=150),d(".bsr-progress").animate({width:h},a)}function c(a){d("#bsr-page-size-slider").slider({value:bsr_object_vars.page_size,range:"min",min:1000,max:50000,step:1000,slide:function(i,h){d("#bsr-page-size-value").text(h.value),d("#bsr_page_size").val(h.value)}})}f(),c()}(jQuery);