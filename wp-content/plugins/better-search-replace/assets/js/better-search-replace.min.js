(function(d){function c(){e();f()}function a(j,g,i,h){d.ajax({type:"POST",url:bsr_object_vars.endpoint+j,data:{bsr_ajax_nonce:bsr_object_vars.ajax_nonce,action:j,bsr_step:g,bsr_page:i,bsr_data:h},dataType:"json",success:function(k){if(typeof k.message!="undefined"){d(".bsr-description").remove();d(".bsr-progress-wrap").append('<p class="description bsr-description">'+k.message+"</p>")}if("done"==k.step){b("100%");if(typeof k.next_action!="undefined"){b("0%",0);a(k.next_action,0,0,k.bsr_data)}else{d(".bsr-processing-wrap").remove();d(".bsr-disabled").removeClass("bsr-disabled button-disabled");window.location=k.url}}else{b(k.percentage);a(j,k.step,k.page,k.bsr_data)}}}).fail(function(k){d(".bsr-processing-wrap").remove();d(".bsr-disabled").removeClass("bsr-disabled button-disabled");d("#bsr-error-wrap").html('<div class="error"><p>'+bsr_object_vars.unknown+"</p></div>");if(window.console&&window.console.log){console.log(k)}})}function e(){var g=d("#bsr-submit");var h=d("#bsr-error-wrap");g.click(function(j){j.preventDefault();if(!g.hasClass("button-disabled")){if(!d("#search_for").val()){h.html('<div class="error"><p>'+bsr_object_vars.no_search+"</p></div>")}else{if(!d("#bsr-table-select").val()){h.html('<div class="error"><p>'+bsr_object_vars.no_tables+"</p></div>")}else{var k=d(".bsr-action-form").serialize();var i=k.replace(/%5C/g,"#BSR_BACKSLASH#");h.html("");g.addClass("bsr-disabled button-disabled");d("#bsr-submit-wrap").append('<div class="bsr-processing-wrap"><div class="spinner is-active bsr-spinner"></div><div class="bsr-progress-wrap"><div class="bsr-progress"></div></div></div>');d(".bsr-progress-wrap").append('<p class="description bsr-description">'+bsr_object_vars.processing+"</p>");a("process_search_replace",0,0,i)}}}})}function b(g,h){if(typeof h=="undefined"){h=150}d(".bsr-progress").animate({width:g},h)}function f(g){d("#bsr-page-size-slider").slider({value:bsr_object_vars.page_size,range:"min",min:1000,max:50000,step:1000,slide:function(h,i){d("#bsr-page-size-value").text(i.value);d("#bsr_page_size").val(i.value)}})}c()})(jQuery);