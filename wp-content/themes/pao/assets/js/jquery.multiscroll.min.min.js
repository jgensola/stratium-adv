/*!
 * multiscroll.js 0.1.7 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
;!function(c,b,f,d,a){c.fn.multiscroll=function(au){function aI(){var k=b.location.hash.replace("#",""),j=k;if(j.length){var g=c(".ms-left").find('[data-anchor="'+j+'"]'),h="undefined"==typeof lastScrolledDestiny;(h||j!==lastScrolledDestiny)&&aC(g)}}function az(j){clearTimeout(ab);var k=c(f.activeElement);if(!k.is("textarea")&&!k.is("input")&&!k.is("select")&&au.keyboardScrolling){var h=j.which,g=[40,38,32,33,34];c.inArray(h,g)>-1&&j.preventDefault(),ab=setTimeout(function(){av(j)},150)}}function av(g){var h=g.shiftKey;switch(g.which){case 38:case 33:i.moveSectionUp();break;case 32:if(h){i.moveSectionUp();break}case 40:case 34:i.moveSectionDown();break;case 36:i.moveTo(1);break;case 35:i.moveTo(c(".ms-left .ms-section").length);break;default:return}}function aG(g){g.preventDefault();var h=c(this).parent().index();aC(c(".ms-left .ms-section").eq(h))}function ay(){var g=c(this).data("tooltip");c('<div class="multiscroll-tooltip '+au.navigationPosition+'">'+g+"</div>").hide().appendTo(c(this)).fadeIn(200)}function aE(){c(this).find(".multiscroll-tooltip").fadeOut(200,function(){c(this).remove()})}function aF(){ac=c(b).height(),c(".ms-tableCell").each(function(){c(this).css({height:aa(c(this).parent())})}),at(),c.isFunction(au.afterResize)&&au.afterResize.call(this)}function at(){au.css3?(H(c(".ms-left"),"translate3d(0px, -"+c(".ms-left").find(".ms-section.active").position().top+"px, 0px)",!1),H(c(".ms-right"),"translate3d(0px, -"+c(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(c(".ms-left").css("top",-c(".ms-left").find(".ms-section.active").position().top),c(".ms-right").css("top",-c(".ms-right").find(".ms-section.active").position().top))}function aC(w){var j=w.index(),h=c(".ms-right").find(".ms-section").eq(n-1-j),q=w.data("anchor"),v=c(".ms-left .ms-section.active"),p=v.index()+1,g=aH(w);af=!0;var u={left:w.position().top,right:h.position().top};if(h.addClass("active").siblings().removeClass("active"),w.addClass("active").siblings().removeClass("active"),ak(q),au.css3){c.isFunction(au.onLeave)&&au.onLeave.call(this,p,j+1,g);var k="translate3d(0px, -"+u.left+"px, 0px)",s="translate3d(0px, -"+u.right+"px, 0px)";H(c(".ms-left"),k,!0),H(c(".ms-right"),s,!0),setTimeout(function(){c.isFunction(au.afterLoad)&&au.afterLoad.call(this,q,j+1),setTimeout(function(){af=!1},aw)},au.scrollingSpeed)}else{c.isFunction(au.onLeave)&&au.onLeave.call(this,p,j+1,g),c(".ms-left").animate({top:-u.left},au.scrollingSpeed,au.easing,function(){c.isFunction(au.afterLoad)&&au.afterLoad.call(this,q,j+1),setTimeout(function(){af=!1},aw)}),c(".ms-right").animate({top:-u.right},au.scrollingSpeed,au.easing)}lastScrolledDestiny=q,aq(q),ap(q,j)}function ar(){f.addEventListener?(f.removeEventListener("mousewheel",aD,!1),f.removeEventListener("wheel",aD,!1)):f.detachEvent("onmousewheel",aD)}function ax(){f.addEventListener?(f.addEventListener("mousewheel",aD,!1),f.addEventListener("wheel",aD,!1)):f.attachEvent("onmousewheel",aD)}function aD(g){g=b.event||g;var h=d.max(-1,d.min(1,g.wheelDelta||-g.deltaY||-g.detail));return af||(h<0?i.moveSectionDown():i.moveSectionUp()),!1}function H(h,g,j){h.toggleClass("ms-easing",j),h.css(ao(g))}function ao(g){return{"-webkit-transform":g,"-moz-transform":g,"-ms-transform":g,transform:g}}function ap(g,h){au.navigation&&(c("#multiscroll-nav").find(".active").removeClass("active"),g?c("#multiscroll-nav").find('a[href="#'+g+'"]').addClass("active"):c("#multiscroll-nav").find("li").eq(h).find("a").addClass("active"))}function aq(g){au.menu&&(c(au.menu).find(".active").removeClass("active"),c(au.menu).find('[data-menuanchor="'+g+'"]').addClass("active"))}function aH(g){var j=c(".ms-left .ms-section.active").index(),h=g.index();return j>h?"up":"down"}function ak(g){au.anchors.length&&(location.hash=g),G()}function G(){var j=c(".ms-left .ms-section.active"),l=j.data("anchor"),k=j.index(),h=String(k);au.anchors.length&&(h=l),h=h.replace("/","-").replace("#","");var g=new RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");c("body")[0].className=c("body")[0].className.replace(g,""),c("body").addClass("ms-viewing-"+h)}function ai(){var j,k=f.createElement("p"),h={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};f.body.insertBefore(k,null);for(var g in h){k.style[g]!==a&&(k.style[g]="translate3d(1px,1px,1px)",j=b.getComputedStyle(k).getPropertyValue(h[g]))}return f.body.removeChild(k),j!==a&&j.length>0&&"none"!==j}function ad(g){g.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+aa(g)+'px" />')}function aa(h){var g=ac;if(au.paddingTop||au.paddingBottom){var j=parseInt(h.css("padding-top"))+parseInt(h.css("padding-bottom"));g=ac-j}return g}function aA(){var h=b.location.hash.replace("#",""),g=c('.ms-left .ms-section[data-anchor="'+h+'"]');h.length&&aC(g)}function ae(j){var h=j.originalEvent;if(aj(h)){j.preventDefault();c(".ms-left .ms-section.active");if(!af){var g=ah(h);am=g.y,o=g.x,d.abs(Z-am)>c(b).height()/100*au.touchSensitivity&&(Z>am?i.moveSectionDown():am>Z&&i.moveSectionUp())}}}function aj(g){return"undefined"==typeof g.pointerType||"mouse"!=g.pointerType}function an(h){var g=h.originalEvent;if(aj(g)){var j=ah(g);Z=j.y,aB=j.x}}function al(){ag&&(MSPointer=e(),c(f).off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,an),c(f).off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,ae))}function J(){ag&&(MSPointer=e(),c(f).off("touchstart "+MSPointer.down),c(f).off("touchmove "+MSPointer.move))}function e(){var g;return g=b.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function ah(h){var g=[];return g.y="undefined"!=typeof h.pageY&&(h.pageY||h.pageX)?h.pageY:h.touches[0].pageY,g.x="undefined"!=typeof h.pageX&&(h.pageY||h.pageX)?h.pageX:h.touches[0].pageX,ag&&aj(h)&&(g.y=h.touches[0].pageY,g.x=h.touches[0].pageX),g}var i=c.fn.multiscroll;au=c.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},au);var aw=600,ag="ontouchstart" in b||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints;".ms-right"!==au.rightSelector&&c(au.rightSelector).addClass("ms-right"),".ms-left"!==au.leftSelector&&c(au.leftSelector).addClass("ms-left");var t,n=c(".ms-left").find(".ms-section").length,af=!1,ac=c(b).height();ax(),al(),au.css3&&(au.css3=ai()),".ms-section"!==au.sectionSelector&&c(au.sectionSelector).each(function(){c(this).addClass("ms-section")}),au.navigation&&(c("body").append('<div id="multiscroll-nav"><ul></ul></div>'),t=c("#multiscroll-nav"),t.css("color",au.navigationColor),t.addClass(au.navigationPosition)),c(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"}),c(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"}),c(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"}),c(".ms-left .ms-section, .ms-right .ms-section").each(function(){var g=c(this).index();if((au.paddingTop||au.paddingBottom)&&c(this).css("padding",au.paddingTop+" 0 "+au.paddingBottom+" 0"),"undefined"!=typeof au.sectionsColor[g]&&c(this).css("background-color",au.sectionsColor[g]),"undefined"!=typeof au.anchors[g]&&c(this).attr("data-anchor",au.anchors[g]),au.verticalCentered&&ad(c(this)),c(this).closest(".ms-left").length&&au.navigation){var j="";au.anchors.length&&(j=au.anchors[g]);var h=au.navigationTooltips[g];"undefined"==typeof h&&(h=""),au.navigation&&t.find("ul").append('<li data-tooltip="'+h+'"><a href="#'+j+'"><span></span></a></li>')}}),c(".ms-right").html(c(".ms-right").find(".ms-section").get().reverse()),c(".ms-left .ms-section, .ms-right .ms-section").each(function(){var g=c(this).index();c(this).css({height:"100%"}),!g&&au.navigation&&t.find("li").eq(g).find("a").addClass("active")}).promise().done(function(){c(".ms-left .ms-section.active").length||(c(".ms-right").find(".ms-section").last().addClass("active"),c(".ms-left").find(".ms-section").first().addClass("active")),au.navigation&&t.css("margin-top","-"+t.height()/2+"px"),c.isFunction(au.afterRender)&&au.afterRender.call(this),at(),G(),c(b).on("load",function(){aA()})}),c(b).on("hashchange",aI),c(f).keydown(az);var ab;c(f).mousedown(function(g){if(1==g.button){return g.preventDefault(),!1}}),c(f).on("click","#multiscroll-nav a",aG),c(f).on({mouseenter:ay,mouseleave:aE},"#multiscroll-nav li"),au.normalScrollElements&&(c(f).on("mouseenter",au.normalScrollElements,function(){i.setMouseWheelScrolling(!1)}),c(f).on("mouseleave",au.normalScrollElements,function(){i.setMouseWheelScrolling(!0)})),c(b).on("resize",aF),i.moveSectionUp=function(){var g=c(".ms-left .ms-section.active").prev(".ms-section");!g.length&&au.loopTop&&(g=c(".ms-left .ms-section").last()),g.length&&aC(g)},i.moveSectionDown=function(){var g=c(".ms-left .ms-section.active").next(".ms-section");!g.length&&au.loopBottom&&(g=c(".ms-left .ms-section").first()),g.length&&aC(g)},i.moveTo=function(g){var h="";h=isNaN(g)?c('.ms-left [data-anchor="'+g+'"]'):c(".ms-left .ms-section").eq(g-1),aC(h)},i.setKeyboardScrolling=function(g){au.keyboardScrolling=g},i.setMouseWheelScrolling=function(g){g?ax():ar()},i.setScrollingSpeed=function(g){au.scrollingSpeed=g};var Z=0,aB=0,am=0,o=0;i.destroy=function(){i.setKeyboardScrolling(!1),i.setMouseWheelScrolling(!1),J(),c(b).off("hashchange",aI).off("resize",aF),c(f).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")},i.build=function(){i.setKeyboardScrolling(!0),i.setMouseWheelScrolling(!0),al(),c(b).on("hashchange",aI).on("resize",aF),c(f).on("mouseenter","#multiscroll-nav li",ay).on("mouseleave","#multiscroll-nav li",aE).on("click","#multiscroll-nav a",aG)}}}(jQuery,window,document,Math);