/*!
 * multiscroll.js 0.1.7 Beta
 * https://github.com/alvarotrigo/multiscroll.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
;!function(j,e,h,i,g){j.fn.multiscroll=function(l){function O(){var n=e.location.hash.replace("#",""),o=n;if(o.length){var G=j(".ms-left").find('[data-anchor="'+o+'"]'),t="undefined"==typeof lastScrolledDestiny;(t||o!==lastScrolledDestiny)&&U(G)}}function b(o){clearTimeout(M);var n=j(h.activeElement);if(!n.is("textarea")&&!n.is("input")&&!n.is("select")&&l.keyboardScrolling){var t=o.which,G=[40,38,32,33,34];j.inArray(t,G)>-1&&o.preventDefault(),M=setTimeout(function(){k(o)},150)}}function k(o){var n=o.shiftKey;switch(o.which){case 38:case 33:ab.moveSectionUp();break;case 32:if(n){ab.moveSectionUp();break}case 40:case 34:ab.moveSectionDown();break;case 36:ab.moveTo(1);break;case 35:ab.moveTo(j(".ms-left .ms-section").length);break;default:return}}function Q(o){o.preventDefault();var n=j(this).parent().index();U(j(".ms-left .ms-section").eq(n))}function c(){var n=j(this).data("tooltip");j('<div class="multiscroll-tooltip '+l.navigationPosition+'">'+n+"</div>").hide().appendTo(j(this)).fadeIn(200)}function S(){j(this).find(".multiscroll-tooltip").fadeOut(200,function(){j(this).remove()})}function R(){L=j(e).height(),j(".ms-tableCell").each(function(){j(this).css({height:N(j(this).parent())})}),m(),j.isFunction(l.afterResize)&&l.afterResize.call(this)}function m(){l.css3?(B(j(".ms-left"),"translate3d(0px, -"+j(".ms-left").find(".ms-section.active").position().top+"px, 0px)",!1),B(j(".ms-right"),"translate3d(0px, -"+j(".ms-right").find(".ms-section.active").position().top+"px, 0px)",!1)):(j(".ms-left").css("top",-j(".ms-left").find(".ms-section.active").position().top),j(".ms-right").css("top",-j(".ms-right").find(".ms-section.active").position().top))}function U(Z){var G=Z.index(),H=j(".ms-right").find(".ms-section").eq(aa-1-G),n=Z.data("anchor"),ad=j(".ms-left .ms-section.active"),o=ad.index()+1,J=P(Z);F=!0;var ae={left:Z.position().top,right:H.position().top};if(H.addClass("active").siblings().removeClass("active"),Z.addClass("active").siblings().removeClass("active"),x(n),l.css3){j.isFunction(l.onLeave)&&l.onLeave.call(this,o,G+1,J);var t="translate3d(0px, -"+ae.left+"px, 0px)",af="translate3d(0px, -"+ae.right+"px, 0px)";B(j(".ms-left"),t,!0),B(j(".ms-right"),af,!0),setTimeout(function(){j.isFunction(l.afterLoad)&&l.afterLoad.call(this,n,G+1),setTimeout(function(){F=!1},f)},l.scrollingSpeed)}else{j.isFunction(l.onLeave)&&l.onLeave.call(this,o,G+1,J),j(".ms-left").animate({top:-ae.left},l.scrollingSpeed,l.easing,function(){j.isFunction(l.afterLoad)&&l.afterLoad.call(this,n,G+1),setTimeout(function(){F=!1},f)}),j(".ms-right").animate({top:-ae.right},l.scrollingSpeed,l.easing)}lastScrolledDestiny=n,q(n),r(n,G)}function p(){h.addEventListener?(h.removeEventListener("mousewheel",T,!1),h.removeEventListener("wheel",T,!1)):h.detachEvent("onmousewheel",T)}function d(){h.addEventListener?(h.addEventListener("mousewheel",T,!1),h.addEventListener("wheel",T,!1)):h.attachEvent("onmousewheel",T)}function T(o){o=e.event||o;var n=i.max(-1,i.min(1,o.wheelDelta||-o.deltaY||-o.detail));return F||(n<0?ab.moveSectionDown():ab.moveSectionUp()),!1}function B(o,t,n){o.toggleClass("ms-easing",n),o.css(s(t))}function s(n){return{"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,transform:n}}function r(o,n){l.navigation&&(j("#multiscroll-nav").find(".active").removeClass("active"),o?j("#multiscroll-nav").find('a[href="#'+o+'"]').addClass("active"):j("#multiscroll-nav").find("li").eq(n).find("a").addClass("active"))}function q(n){l.menu&&(j(l.menu).find(".active").removeClass("active"),j(l.menu).find('[data-menuanchor="'+n+'"]').addClass("active"))}function P(t){var n=j(".ms-left .ms-section.active").index(),o=t.index();return n>o?"up":"down"}function x(n){l.anchors.length&&(location.hash=n),D()}function D(){var t=j(".ms-left .ms-section.active"),n=t.data("anchor"),o=t.index(),G=String(o);l.anchors.length&&(G=n),G=G.replace("/","-").replace("#","");var H=new RegExp("\\b\\s?ms-viewing-[^\\s]+\\b","g");j("body")[0].className=j("body")[0].className.replace(H,""),j("body").addClass("ms-viewing-"+G)}function A(){var o,n=h.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};h.body.insertBefore(n,null);for(var G in t){n.style[G]!==g&&(n.style[G]="translate3d(1px,1px,1px)",o=e.getComputedStyle(n).getPropertyValue(t[G]))}return h.body.removeChild(n),o!==g&&o.length>0&&"none"!==o}function K(n){n.addClass("ms-table").wrapInner('<div class="ms-tableCell" style="height: '+N(n)+'px" />')}function N(o){var t=L;if(l.paddingTop||l.paddingBottom){var n=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"));t=L-n}return t}function W(){var n=e.location.hash.replace("#",""),o=j('.ms-left .ms-section[data-anchor="'+n+'"]');n.length&&U(o)}function I(n){var o=n.originalEvent;if(z(o)){n.preventDefault();j(".ms-left .ms-section.active");if(!F){var t=C(o);v=t.y,Y=t.x,i.abs(a-v)>j(e).height()/100*l.touchSensitivity&&(a>v?ab.moveSectionDown():v>a&&ab.moveSectionUp())}}}function z(n){return"undefined"==typeof n.pointerType||"mouse"!=n.pointerType}function u(o){var t=o.originalEvent;if(z(t)){var n=C(t);a=n.y,V=n.x}}function w(){E&&(MSPointer=ac(),j(h).off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,u),j(h).off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,I))}function y(){E&&(MSPointer=ac(),j(h).off("touchstart "+MSPointer.down),j(h).off("touchmove "+MSPointer.move))}function ac(){var n;return n=e.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function C(n){var o=[];return o.y="undefined"!=typeof n.pageY&&(n.pageY||n.pageX)?n.pageY:n.touches[0].pageY,o.x="undefined"!=typeof n.pageX&&(n.pageY||n.pageX)?n.pageX:n.touches[0].pageX,E&&z(n)&&(o.y=n.touches[0].pageY,o.x=n.touches[0].pageX),o}var ab=j.fn.multiscroll;l=j.extend({verticalCentered:!0,scrollingSpeed:700,easing:"easeInQuart",menu:!1,sectionsColor:[],anchors:[],navigation:!1,navigationPosition:"right",navigationColor:"#000",navigationTooltips:[],loopBottom:!1,loopTop:!1,css3:!1,paddingTop:0,paddingBottom:0,fixedElements:null,normalScrollElements:null,keyboardScrolling:!0,touchSensitivity:5,sectionSelector:".ms-section",leftSelector:".ms-left",rightSelector:".ms-right",afterLoad:null,onLeave:null,afterRender:null,afterResize:null},l);var f=600,E="ontouchstart" in e||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints;".ms-right"!==l.rightSelector&&j(l.rightSelector).addClass("ms-right"),".ms-left"!==l.leftSelector&&j(l.leftSelector).addClass("ms-left");var X,aa=j(".ms-left").find(".ms-section").length,F=!1,L=j(e).height();d(),w(),l.css3&&(l.css3=A()),".ms-section"!==l.sectionSelector&&j(l.sectionSelector).each(function(){j(this).addClass("ms-section")}),l.navigation&&(j("body").append('<div id="multiscroll-nav"><ul></ul></div>'),X=j("#multiscroll-nav"),X.css("color",l.navigationColor),X.addClass(l.navigationPosition)),j(".ms-right, .ms-left").css({width:"50%",position:"absolute",height:"100%","-ms-touch-action":"none"}),j(".ms-right").css({right:"1px",top:"0","-ms-touch-action":"none","touch-action":"none"}),j(".ms-left").css({left:"0",top:"0","-ms-touch-action":"none","touch-action":"none"}),j(".ms-left .ms-section, .ms-right .ms-section").each(function(){var t=j(this).index();if((l.paddingTop||l.paddingBottom)&&j(this).css("padding",l.paddingTop+" 0 "+l.paddingBottom+" 0"),"undefined"!=typeof l.sectionsColor[t]&&j(this).css("background-color",l.sectionsColor[t]),"undefined"!=typeof l.anchors[t]&&j(this).attr("data-anchor",l.anchors[t]),l.verticalCentered&&K(j(this)),j(this).closest(".ms-left").length&&l.navigation){var n="";l.anchors.length&&(n=l.anchors[t]);var o=l.navigationTooltips[t];"undefined"==typeof o&&(o=""),l.navigation&&X.find("ul").append('<li data-tooltip="'+o+'"><a href="#'+n+'"><span></span></a></li>')}}),j(".ms-right").html(j(".ms-right").find(".ms-section").get().reverse()),j(".ms-left .ms-section, .ms-right .ms-section").each(function(){var n=j(this).index();j(this).css({height:"100%"}),!n&&l.navigation&&X.find("li").eq(n).find("a").addClass("active")}).promise().done(function(){j(".ms-left .ms-section.active").length||(j(".ms-right").find(".ms-section").last().addClass("active"),j(".ms-left").find(".ms-section").first().addClass("active")),l.navigation&&X.css("margin-top","-"+X.height()/2+"px"),j.isFunction(l.afterRender)&&l.afterRender.call(this),m(),D(),j(e).on("load",function(){W()})}),j(e).on("hashchange",O),j(h).keydown(b);var M;j(h).mousedown(function(n){if(1==n.button){return n.preventDefault(),!1}}),j(h).on("click","#multiscroll-nav a",Q),j(h).on({mouseenter:c,mouseleave:S},"#multiscroll-nav li"),l.normalScrollElements&&(j(h).on("mouseenter",l.normalScrollElements,function(){ab.setMouseWheelScrolling(!1)}),j(h).on("mouseleave",l.normalScrollElements,function(){ab.setMouseWheelScrolling(!0)})),j(e).on("resize",R),ab.moveSectionUp=function(){var n=j(".ms-left .ms-section.active").prev(".ms-section");!n.length&&l.loopTop&&(n=j(".ms-left .ms-section").last()),n.length&&U(n)},ab.moveSectionDown=function(){var n=j(".ms-left .ms-section.active").next(".ms-section");!n.length&&l.loopBottom&&(n=j(".ms-left .ms-section").first()),n.length&&U(n)},ab.moveTo=function(o){var n="";n=isNaN(o)?j('.ms-left [data-anchor="'+o+'"]'):j(".ms-left .ms-section").eq(o-1),U(n)},ab.setKeyboardScrolling=function(n){l.keyboardScrolling=n},ab.setMouseWheelScrolling=function(n){n?d():p()},ab.setScrollingSpeed=function(n){l.scrollingSpeed=n};var a=0,V=0,v=0,Y=0;ab.destroy=function(){ab.setKeyboardScrolling(!1),ab.setMouseWheelScrolling(!1),y(),j(e).off("hashchange",O).off("resize",R),j(h).off("mouseenter","#multiscroll-nav li").off("mouseleave","#multiscroll-nav li").off("click","#multiscroll-nav a")},ab.build=function(){ab.setKeyboardScrolling(!0),ab.setMouseWheelScrolling(!0),w(),j(e).on("hashchange",O).on("resize",R),j(h).on("mouseenter","#multiscroll-nav li",c).on("mouseleave","#multiscroll-nav li",S).on("click","#multiscroll-nav a",Q)}}}(jQuery,window,document,Math);