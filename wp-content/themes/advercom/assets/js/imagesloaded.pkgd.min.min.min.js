/*!
 * imagesLoaded PACKAGED v4.1.1
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
;!function(d,c){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",c):"object"==typeof module&&module.exports?module.exports=c():d.EvEmitter=c()}("undefined"!=typeof window?window:this,function(){function d(){}var c=d.prototype;return c.on=function(e,b){if(e&&b){var h=this._events=this._events||{},a=h[e]=h[e]||[];return -1==a.indexOf(b)&&a.push(b),this}},c.once=function(e,b){if(e&&b){this.on(e,b);var h=this._onceEvents=this._onceEvents||{},a=h[e]=h[e]||{};return a[b]=!0,this}},c.off=function(e,b){var h=this._events&&this._events[e];if(h&&h.length){var a=h.indexOf(b);return -1!=a&&h.splice(a,1),this}},c.emitEvent=function(m,e){var n=this._events&&this._events[m];if(n&&n.length){var a=0,b=n[a];e=e||[];for(var i=this._onceEvents&&this._onceEvents[m];b;){var l=i&&i[b];l&&(this.off(m,b),delete i[b]),b.apply(this,e),a+=l?0:1,b=n[a]}return this}},d}),function(d,c){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(a){return c(d,a)}):"object"==typeof module&&module.exports?module.exports=c(d,require("ev-emitter")):d.imagesLoaded=c(d,d.EvEmitter)}(window,function(d,i){function o(f,c){for(var b in c){f[b]=c[b]}return f}function r(f){var c=[];if(Array.isArray(f)){c=f}else{if("number"==typeof f.length){for(var b=0;b<f.length;b++){c.push(f[b])}}else{c.push(f)}}return c}function s(b,c,f){return this instanceof s?("string"==typeof b&&(b=document.querySelectorAll(b)),this.elements=r(b),this.options=o({},this.options),"function"==typeof c?f=c:o(this.options,c),f&&this.on("always",f),this.getImages(),n&&(this.jqDeferred=new n.Deferred),void setTimeout(function(){this.check()}.bind(this))):new s(b,c,f)}function t(b){this.img=b}function a(b,c){this.url=b,this.element=c,this.img=new Image}var n=d.jQuery,e=d.console;s.prototype=Object.create(i.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(l){"IMG"==l.nodeName&&this.addImage(l),this.options.background===!0&&this.addElementBackgroundImages(l);var g=l.nodeType;if(g&&h[g]){for(var f=l.querySelectorAll("img"),b=0;b<f.length;b++){var c=f[b];this.addImage(c)}if("string"==typeof this.options.background){var j=l.querySelectorAll(this.options.background);for(b=0;b<j.length;b++){var k=j[b];this.addElementBackgroundImages(k)}}}};var h={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(j){var f=getComputedStyle(j);if(f){for(var b=/url\((['"])?(.*?)\1\)/gi,c=b.exec(f.backgroundImage);null!==c;){var g=c&&c[2];g&&this.addBackground(g,j),c=b.exec(f.backgroundImage)}}},s.prototype.addImage=function(b){var c=new t(b);this.images.push(c)},s.prototype.addBackground=function(f,c){var b=new a(f,c);this.images.push(b)},s.prototype.check=function(){function b(f,g,j){setTimeout(function(){c.progress(f,g,j)})}var c=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(f){f.once("progress",b),f.check()}):void this.complete()},s.prototype.progress=function(f,c,b){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!f.isLoaded,this.emitEvent("progress",[this,f,c]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,f),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&e&&e.log("progress: "+b,f,c)},s.prototype.complete=function(){var b=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(b,[this]),this.emitEvent("always",[this]),this.jqDeferred){var c=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[c](this)}},t.prototype=Object.create(i.prototype),t.prototype.check=function(){var b=this.getIsImageComplete();return b?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void (this.proxyImage.src=this.img.src))},t.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},t.prototype.confirm=function(b,c){this.isLoaded=b,this.emitEvent("progress",[this,this.img,c])},t.prototype.handleEvent=function(b){var c="on"+b.type;this[c]&&this[c](b)},t.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},t.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},t.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype=Object.create(t.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var b=this.getIsImageComplete();b&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(b,c){this.isLoaded=b,this.emitEvent("progress",[this,this.element,c])},s.makeJQueryPlugin=function(b){b=b||d.jQuery,b&&(n=b,n.fn.imagesLoaded=function(c,g){var f=new s(this,c,g);return f.jqDeferred.promise(n(this))})},s.makeJQueryPlugin(),s});