(function(n,q,t){var x=n.event,v,m;v=x.special.debouncedresize={setup:function(){n(this).on("resize",v.handler)},teardown:function(){n(this).off("resize",v.handler)},handler:function(b,a){var c=this,d=arguments,e=function(){b.type="debouncedresize";x.dispatch.apply(c,d)};if(m){clearTimeout(m)}a?e():m=setTimeout(e,v.threshold)},threshold:100};Array.prototype.shuffle=function(){var c=this.length,b,a;while(c--){b=Math.floor(Math.random()*c);a=this[c];this[c]=this[b];this[b]=a}return this};function p(){var b=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var a=0;a<b.length;a++){if((b[a]+"Hidden") in document){return b[a]+"Hidden"}}return null}function w(){var a=p();if(!a){return false}return document[a]}function r(a){return Object.keys(a).length===0}var u=n(q),s=q.Modernizr;n.GridRotator=function(c,b){this.$el=n(b);if(s.backgroundsize){var a=this;this.$el.addClass("ri-grid-loading");this._init(c)}};n.GridRotator.defaults={rows:2,columns:10,w1200:{rows:2,columns:10},w992:{rows:2,columns:6},w510:{rows:2,columns:4},w480:{rows:2,columns:3},w320:{rows:2,columns:2},w240:{rows:2,columns:2},step:5,maxStep:3,preventClick:true,animType:"random",animSpeed:800,animEasingOut:"linear",animEasingIn:"linear",interval:3000,slideshow:true,onhover:false,nochange:[]};n.GridRotator.prototype={_init:function(a){this.options=n.extend(true,{},n.GridRotator.defaults,a);this._config()},_config:function(){var a=this,d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.supportTransitions=s.csstransitions;this.supportTransforms3D=s.csstransforms3d;this.transEndEventName=d[s.prefixed("transition")]+".gridrotator";this.animTypes=this.supportTransforms3D?["fadeInOut","slideLeft","slideRight","slideTop","slideBottom","rotateLeft","rotateRight","rotateTop","rotateBottom","scale","rotate3d","rotateLeftScale","rotateRightScale","rotateTopScale","rotateBottomScale"]:["fadeInOut","slideLeft","slideRight","slideTop","slideBottom"];this.animType=this.options.animType;if(this.animType!=="random"&&!this.supportTransforms3D&&n.inArray(this.animType,this.animTypes)===-1&&this.animType!=="showHide"){this.animType="fadeInOut"}this.animTypesTotal=this.animTypes.length;this.$list=this.$el.children("ul");var e=0,b=this.$list.find("img"),c=b.length;b.each(function(){var g=n(this),f=g.attr("src");n("<img/>").load(function(){++e;g.parent().css("background-image","url("+f+")");if(e===c){b.remove();a.$el.removeClass("ri-grid-loading");a.$items=a.$list.children("li");a.$itemsCache=a.$items.clone();a.itemsTotal=a.$items.length;a.outItems=[];a._layout(function(){a._initEvents()});a._start()}}).attr("src",f)})},_layout:function(h){var g=this;this._setGridDim();this.$list.empty();this.$items=this.$itemsCache.clone().appendTo(this.$list);var f=this.$items.filter(":gt("+(this.showTotal-1)+")"),e=f.children("span");this.outItems.length=0;e.each(function(l){g.outItems.push(n(this))});f.remove();var k=(document.defaultView)?parseInt(document.defaultView.getComputedStyle(this.$el.get(0),null).width):this.$el.width(),a=Math.floor(k/this.columns),b=k-(this.columns*Math.floor(a));for(var c=0;c<this.rows;++c){for(var d=0;d<this.columns;++d){var i=this.columns*c+d,j=this.$items.eq(i);j.css({width:d<Math.floor(b)?a+1:a,height:a});if(n.inArray(i,this.options.nochange)!==-1){j.addClass("ri-nochange").data("nochange",true)}}}if(this.options.preventClick){this.$items.children().css("cursor","default").on("click.gridrotator",false)}if(h){h.call()}},_setGridDim:function(){var a=this.$el.width();switch(true){case (a<240):this.rows=this.options.w240.rows;this.columns=this.options.w240.columns;break;case (a<320):this.rows=this.options.w320.rows;this.columns=this.options.w320.columns;break;case (a<480):this.rows=this.options.w480.rows;this.columns=this.options.w480.columns;break;case (a<510):this.rows=this.options.w510.rows;this.columns=this.options.w510.columns;break;case (a<992):this.rows=this.options.w992.rows;this.columns=this.options.w992.columns;break;case (a<1200):this.rows=this.options.w1200.rows;this.columns=this.options.w1200.columns;break;default:this.rows=this.options.rows;this.columns=this.options.columns;break}this.showTotal=this.rows*this.columns},_initEvents:function(){var c=this;u.on("debouncedresize.gridrotator",function(){c._layout()});var b=p();if(b){var a=b.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(a,function(){c._visChange()})}if(!s.touch&&this.options.onhover){c.$items.on("mouseenter.gridrotator",function(){var d=n(this);if(!d.data("active")&&!d.data("hovered")&&!d.data("nochange")){d.data("hovered",true);c._replace(d)}}).on("mouseleave.gridrotator",function(){n(this).data("hovered",false)})}},_visChange:function(){w()?clearTimeout(this.playtimeout):this._start()},_start:function(){if(this.showTotal<this.itemsTotal&&this.options.slideshow){this._showNext()}},_getAnimType:function(){return this.animType==="random"?this.animTypes[Math.floor(Math.random()*this.animTypesTotal)]:this.animType},_getAnimProperties:function(d){var e={},h={},b={},a={},g=this._getAnimType(),c,f=0;switch(g){case"showHide":c=0;a.opacity=0;break;case"fadeInOut":a.opacity=0;break;case"slideLeft":e.left=d.width();b.left=0;a.left=-d.width();break;case"slideRight":e.left=-d.width();b.left=0;a.left=d.width();break;case"slideTop":e.top=d.height();b.top=0;a.top=-d.height();break;case"slideBottom":e.top=-d.height();b.top=0;a.top=d.height();break;case"rotateLeft":c=this.options.animSpeed/2;e.transform="rotateY(90deg)";b.transform="rotateY(0deg)";f=c;a.transform="rotateY(-90deg)";break;case"rotateRight":c=this.options.animSpeed/2;e.transform="rotateY(-90deg)";b.transform="rotateY(0deg)";f=c;a.transform="rotateY(90deg)";break;case"rotateTop":c=this.options.animSpeed/2;e.transform="rotateX(90deg)";b.transform="rotateX(0deg)";f=c;a.transform="rotateX(-90deg)";break;case"rotateBottom":c=this.options.animSpeed/2;e.transform="rotateX(-90deg)";b.transform="rotateX(0deg)";f=c;a.transform="rotateX(90deg)";break;case"scale":c=this.options.animSpeed/2;e.transform="scale(0)";h.transform="scale(1)";b.transform="scale(1)";f=c;a.transform="scale(0)";break;case"rotateLeftScale":h.transform="scale(1)";c=this.options.animSpeed/2;e.transform="scale(0.3) rotateY(90deg)";b.transform="scale(1) rotateY(0deg)";f=c;a.transform="scale(0.3) rotateY(-90deg)";break;case"rotateRightScale":h.transform="scale(1)";c=this.options.animSpeed/2;e.transform="scale(0.3) rotateY(-90deg)";b.transform="scale(1) rotateY(0deg)";f=c;a.transform="scale(0.3) rotateY(90deg)";break;case"rotateTopScale":h.transform="scale(1)";c=this.options.animSpeed/2;e.transform="scale(0.3) rotateX(90deg)";b.transform="scale(1) rotateX(0deg)";f=c;a.transform="scale(0.3) rotateX(-90deg)";break;case"rotateBottomScale":h.transform="scale(1)";c=this.options.animSpeed/2;e.transform="scale(0.3) rotateX(-90deg)";b.transform="scale(1) rotateX(0deg)";f=c;a.transform="scale(0.3) rotateX(90deg)";break;case"rotate3d":c=this.options.animSpeed/2;e.transform="rotate3d( 1, 1, 0, 90deg )";b.transform="rotate3d( 1, 1, 0, 0deg )";f=c;a.transform="rotate3d( 1, 1, 0, -90deg )";break}return{startInProp:e,startOutProp:h,endInProp:b,endOutProp:a,delay:f,animSpeed:c!=t?c:this.options.animSpeed}},_showNext:function(b){var a=this;clearTimeout(this.playtimeout);this.playtimeout=setTimeout(function(){var d=a.options.step,h=a.options.maxStep,f=1;if(h>a.showTotal){h=a.showTotal}var c=d==="random"?Math.floor(Math.random()*h+f):Math.min(Math.abs(d),h),i=a._getRandom(c,a.showTotal);for(var g=0;g<c;++g){var e=a.$items.eq(i[g]);if(e.data("active")||e.data("nochange")){a._showNext(1);return false}a._replace(e)}a._showNext()},b||Math.max(Math.abs(this.options.interval),300))},_replace:function(e){e.data("active",true);var f=this,b=e.children("span:last"),c={width:b.width(),height:b.height()};e.data("active",true);var a=this.outItems.shift();this.outItems.push(b.clone().css("transition","none"));a.css(c).prependTo(e);var d=this._getAnimProperties(b);a.css(d.startInProp);b.css(d.startOutProp);this._setTransition(a,"all",d.animSpeed,d.delay,this.options.animEasingIn);this._setTransition(b,"all",d.animSpeed,0,this.options.animEasingOut);this._applyTransition(a,d.endInProp,d.animSpeed,function(){var g=n(this),h=d.animSpeed===f.options.animSpeed&&r(d.endInProp)?d.animSpeed:0;setTimeout(function(){if(f.supportTransitions){g.off(f.transEndEventName)}g.next().remove();g.parent().data("active",false)},h)},d.animSpeed===0||r(d.endInProp));this._applyTransition(b,d.endOutProp,d.animSpeed)},_getRandom:function(b,a){var c=[];for(var d=0;d<a;++d){c.push(d)}return c.shuffle().slice(0,b)},_setTransition:function(e,b,d,a,c){setTimeout(function(){e.css("transition",b+" "+d+"ms "+a+"ms "+c)},25)},_applyTransition:function(e,f,c,b,d){var a=this;setTimeout(function(){n.fn.applyStyle=a.supportTransitions?n.fn.css:n.fn.animate;if(b&&a.supportTransitions){e.on(a.transEndEventName,b);if(d){b.call(e)}}b=b||function(){return false};e.stop().applyStyle(f,n.extend(true,[],{duration:c+"ms",complete:b}))},25)}};var o=function(a){if(q.console){q.console.error(a)}};n.fn.gridrotator=function(b){var a=n.data(this,"gridrotator");if(typeof b==="string"){var c=Array.prototype.slice.call(arguments,1);this.each(function(){if(!a){o("cannot call methods on gridrotator prior to initialization; attempted to call method '"+b+"'");return}if(!n.isFunction(a[b])||b.charAt(0)==="_"){o("no such method '"+b+"' for gridrotator instance");return}a[b].apply(a,c)})}else{this.each(function(){if(a){a._init()}else{a=n.data(this,"gridrotator",new n.GridRotator(b,this))}})}return a}})(jQuery,window);